function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{jkDv:function(t,e,o){"use strict";o.r(e),o.d(e,"AdminModule",(function(){return Ut}));var n,r=o("SVse"),c=o("PCNd"),i=o("iInd"),a=o("8Y7J"),s=o("mwRl"),l=o("AytR"),b=o("IheW"),d=((n=function(){function t(e){_classCallCheck(this,t),this.http=e,this.baseUrl=l.a.apiUrl}return _createClass(t,[{key:"createProduct",value:function(t){return this.http.post(this.baseUrl+"products",t)}},{key:"updateProduct",value:function(t,e){return this.http.put(this.baseUrl+"products/"+e,t)}},{key:"deleteProduct",value:function(t){return this.http.delete(this.baseUrl+"products/"+t)}},{key:"uploadImage",value:function(t,e){var o=new FormData;return o.append("photo",t,"image.png"),this.http.put(this.baseUrl+"products/"+e+"/photo",o,{reportProgress:!0,observe:"events"})}},{key:"deleteProductPhoto",value:function(t,e){return this.http.delete(this.baseUrl+"products/"+e+"/photo"+t)}},{key:"setMainPhoto",value:function(t,e){return this.http.post(this.baseUrl+"products/"+e+"/photo/"+t,{})}},{key:"getAllUsers",value:function(){return this.http.get(this.baseUrl+"account/getallusers")}}]),t}()).\u0275fac=function(t){return new(t||n)(a.Zb(b.b))},n.\u0275prov=a.Lb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),u=o("/gyc"),p=o("a4eG"),h=o("TSSN"),g=function(t){return["edit",t]};function f(t,e){if(1&t){var o=a.Wb();a.Vb(0,"tr"),a.Vb(1,"td",18),a.Jc(2),a.Ub(),a.Vb(3,"td"),a.Vb(4,"div",12),a.Qb(5,"img",19),a.Ub(),a.Ub(),a.Vb(6,"th",18),a.Vb(7,"h5"),a.Jc(8),a.Ub(),a.Ub(),a.Vb(9,"td",18),a.Jc(10),a.hc(11,"currency"),a.Ub(),a.Vb(12,"td",18),a.Vb(13,"button",20),a.Jc(14),a.hc(15,"translate"),a.Ub(),a.Ub(),a.Vb(16,"td",18),a.Vb(17,"button",21),a.dc("click",(function(){a.Ac(o);var t=e.$implicit;return a.gc(2).deleteProduct(t.id)})),a.Jc(18),a.hc(19,"translate"),a.Ub(),a.Ub(),a.Ub()}if(2&t){var n=e.$implicit;a.Bb(2),a.Kc(n.id),a.Bb(3),a.oc("src",n.pictureUrl||"/assets/images/placeholder.png",a.Cc),a.oc("alt",n.name),a.Bb(3),a.Kc(n.name),a.Bb(2),a.Kc(a.ic(11,8,n.price)),a.Bb(3),a.nc("routerLink",a.rc(14,g,n.id)),a.Bb(1),a.Kc(a.ic(15,10,"adminProduct.edit")),a.Bb(4),a.Kc(a.ic(19,12,"adminProduct.delete"))}}function m(t,e){if(1&t){var o=a.Wb();a.Vb(0,"div",22),a.Vb(1,"app-pager",23),a.dc("pageChanged",(function(t){return a.Ac(o),a.gc(2).onPageChanged(t)})),a.Ub(),a.Ub()}if(2&t){var n=a.gc(2);a.Bb(1),a.nc("pageSize",n.shopParams.pageSize)("pageNumber",n.shopParams.pageNumber)("totalCount",n.totalCount)}}var v=function(){return["/admin/create"]};function U(t,e){if(1&t&&(a.Vb(0,"section",1),a.Vb(1,"div",2),a.Vb(2,"div",3),a.Vb(3,"div",4),a.Vb(4,"div",5),a.Vb(5,"header",6),a.Jc(6),a.hc(7,"translate"),a.Ub(),a.Vb(8,"button",7),a.Jc(9),a.hc(10,"translate"),a.Ub(),a.Ub(),a.Qb(11,"app-paging-header",8),a.Vb(12,"div",9),a.Vb(13,"table",10),a.Vb(14,"thead"),a.Vb(15,"tr"),a.Vb(16,"th",11),a.Vb(17,"div",12),a.Jc(18,"#"),a.Ub(),a.Ub(),a.Vb(19,"th",11),a.Vb(20,"div",13),a.Jc(21),a.hc(22,"translate"),a.Ub(),a.Ub(),a.Vb(23,"th",11),a.Vb(24,"div",14),a.Jc(25),a.hc(26,"translate"),a.Ub(),a.Ub(),a.Vb(27,"th",11),a.Vb(28,"div",15),a.Jc(29),a.hc(30,"translate"),a.Ub(),a.Ub(),a.Vb(31,"th",11),a.Vb(32,"div",15),a.Jc(33),a.hc(34,"translate"),a.Ub(),a.Ub(),a.Vb(35,"th",11),a.Vb(36,"div",15),a.Jc(37),a.hc(38,"translate"),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Vb(39,"tbody"),a.Hc(40,f,20,16,"tr",16),a.Ub(),a.Ub(),a.Ub(),a.Hc(41,m,2,3,"div",17),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&t){var o=a.gc();a.Bb(6),a.Kc(a.ic(7,13,"adminProduct.productList")),a.Bb(2),a.nc("routerLink",a.qc(27,v)),a.Bb(1),a.Kc(a.ic(10,15,"adminProduct.addNewProduct")),a.Bb(2),a.nc("totalCount",o.totalCount)("pageSize",o.shopParams.pageSize)("pageNumber",o.shopParams.pageNumber),a.Bb(10),a.Kc(a.ic(22,17,"adminProduct.product")),a.Bb(4),a.Kc(a.ic(26,19,"adminProduct.name")),a.Bb(4),a.Kc(a.ic(30,21,"adminProduct.price")),a.Bb(4),a.Kc(a.ic(34,23,"adminProduct.edit")),a.Bb(4),a.Kc(a.ic(38,25,"adminProduct.delete")),a.Bb(3),a.nc("ngForOf",o.products),a.Bb(1),a.nc("ngIf",o.totalCount>0)}}var V,y,P=((V=function(){function t(e,o){_classCallCheck(this,t),this.shopService=e,this.adminservice=o,this.shopParams=this.shopService.getShopParams()}return _createClass(t,[{key:"ngOnInit",value:function(){this.getProducts()}},{key:"getProducts",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.shopService.getProducts(e).subscribe((function(e){t.products=e.data,t.totalCount=e.count}),(function(t){return console.log(t)}))}},{key:"onPageChanged",value:function(t){var e=this.shopService.getShopParams();e.pageNumber!==t&&(e.pageNumber=t,this.shopService.setShopParams(e),this.getProducts(!0))}},{key:"deleteProduct",value:function(t){var e=this;this.adminservice.deleteProduct(t).subscribe((function(){e.products.splice(e.products.findIndex((function(e){return e.id===t})),1),e.totalCount--,e.shopParams.pageSize*(e.shopParams.pageNumber-1)===e.totalCount&&(e.shopParams.pageNumber--,e.shopService.setShopParams(e.shopParams),e.getProducts())}),(function(t){return console.log(t)}))}}]),t}()).\u0275fac=function(t){return new(t||V)(a.Pb(s.a),a.Pb(d))},V.\u0275cmp=a.Jb({type:V,selectors:[["app-admin"]],decls:1,vars:1,consts:[["class","admin-page",4,"ngIf"],[1,"admin-page"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"d-flex","justify-content-between","my-3"],[1,"h2"],[1,"btn","btn-outline-success",3,"routerLink"],[3,"totalCount","pageSize","pageNumber"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"p-2"],[1,"p-2","text-uppercase"],[1,"py-2","text-uppercase"],[1,"p-2","px-3","text-uppercase"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"align-middle"],[1,"img-fluid",2,"max-height","50px",3,"src","alt"],[1,"btn","btn-warning",3,"routerLink"],[1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-center"],[3,"pageSize","pageNumber","totalCount","pageChanged"]],template:function(t,e){1&t&&a.Hc(0,U,42,28,"section",0),2&t&&a.nc("ngIf",e.products)},directives:[r.m,i.d,u.a,r.l,p.a],pipes:[h.c,r.d],styles:[""]}),V),k=function t(){_classCallCheck(this,t),this.sort="Newest",this.pageNumber=1,this.pageSize=6,this.level="Error"},C=function t(){_classCallCheck(this,t),this.data=[]},B=o("lJxs"),w=o("wd/R"),I=((y=function(){function t(e){_classCallCheck(this,t),this.http=e,this.baseUrl=l.a.apiUrl,this.logParams=new k,this.pagination=new C}return _createClass(t,[{key:"getLogsByParams",value:function(){var t=this,e=new b.f;return e=(e=(e=(e=e.append("sort",this.logParams.sort)).append("pageIndex",this.logParams.pageNumber.toString())).append("pageSize",this.logParams.pageSize.toString())).append("level",this.logParams.level),this.logParams&&(this.logParams.dateFrom&&(this.logParams.dateFrom=w(this.logParams.dateFrom).format("YYYY-MM-DD"),e=e.append("dateFrom",this.logParams.dateFrom)),this.logParams.dateTo&&(this.logParams.dateTo=w(this.logParams.dateTo).format("YYYY-MM-DD"),e=e.append("dateTo",this.logParams.dateTo))),this.http.get(this.baseUrl+"logs",{observe:"response",params:e}).pipe(Object(B.a)((function(e){return t.pagination=e.body,t.pagination})))}},{key:"getLogDetailed",value:function(t){return this.http.get(this.baseUrl+"logs/"+t)}},{key:"getLogParams",value:function(){return this.logParams}},{key:"setLogParams",value:function(t){this.logParams=t}}]),t}()).\u0275fac=function(t){return new(t||y)(a.Zb(b.b))},y.\u0275prov=a.Lb({token:y,factory:y.\u0275fac,providedIn:"root"}),y);function S(t,e){if(1&t&&(a.Vb(0,"div",1),a.Vb(1,"div",2),a.Vb(2,"div",3),a.Vb(3,"h3"),a.Jc(4),a.Ub(),a.Ub(),a.Ub(),a.Vb(5,"div",2),a.Vb(6,"div",4),a.Vb(7,"h4"),a.Jc(8),a.hc(9,"translate"),a.Ub(),a.Vb(10,"p"),a.Jc(11),a.hc(12,"slice"),a.Ub(),a.Ub(),a.Ub(),a.Vb(13,"div",2),a.Vb(14,"div",5),a.Vb(15,"h4"),a.Jc(16),a.hc(17,"translate"),a.Ub(),a.Vb(18,"p"),a.Jc(19),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&t){var o=a.gc();a.Bb(4),a.Lc("Log n\xb0: ",o.log.id,""),a.Bb(4),a.Kc(a.ic(9,5,"logs.message")),a.Bb(3),a.Kc(a.kc(12,7,o.log.message,0,130)),a.Bb(5),a.Kc(a.ic(17,11,"logs.exception")),a.Bb(3),a.Kc(o.log.exception)}}var J,F=((J=function(){function t(e,o){_classCallCheck(this,t),this.logService=e,this.activatedRoute=o}return _createClass(t,[{key:"ngOnInit",value:function(){this.loadLog()}},{key:"loadLog",value:function(){var t=this;this.logService.getLogDetailed(+this.activatedRoute.snapshot.paramMap.get("id")).subscribe((function(e){t.log=e}),(function(t){return console.log(t)}))}}]),t}()).\u0275fac=function(t){return new(t||J)(a.Pb(I),a.Pb(i.a))},J.\u0275cmp=a.Jb({type:J,selectors:[["app-log-detail"]],decls:1,vars:1,consts:[["class","container mt-5",4,"ngIf"],[1,"container","mt-5"],[1,"row"],[1,"col-12"],[1,"col-6"],[1,"col-12","ml-3"]],template:function(t,e){1&t&&a.Hc(0,S,20,13,"div",0),2&t&&a.nc("ngIf",e.log)},directives:[r.m],pipes:[h.c,r.t],styles:[""]}),J),L=o("s7LF"),O=o("VfTn");function _(t,e){if(1&t&&(a.Vb(0,"option",17),a.Jc(1),a.Ub()),2&t){var o=e.$implicit,n=a.gc();a.nc("selected",n.logParams.sort===o.value)("value",o.value),a.Bb(1),a.Kc(o.name)}}function K(t,e){if(1&t&&(a.Vb(0,"option",17),a.Jc(1),a.Ub()),2&t){var o=e.$implicit,n=a.gc();a.nc("selected",n.logParams.sort===o.value)("value",o.value),a.Bb(1),a.Kc(o.name)}}function T(t,e){if(1&t&&(a.Vb(0,"tr",18),a.Vb(1,"th"),a.Jc(2),a.Ub(),a.Vb(3,"td"),a.Jc(4),a.hc(5,"slice"),a.Ub(),a.Vb(6,"td"),a.Jc(7),a.hc(8,"slice"),a.Ub(),a.Vb(9,"td"),a.Jc(10),a.hc(11,"slice"),a.Ub(),a.Vb(12,"td"),a.Jc(13),a.Ub(),a.Vb(14,"td"),a.Jc(15),a.Ub(),a.Ub()),2&t){var o=e.$implicit;a.oc("routerLink",o.id),a.Bb(2),a.Kc(o.id),a.Bb(2),a.Kc(a.kc(5,7,o.message,0,30)),a.Bb(3),a.Kc(a.kc(8,11,o.logged,0,10)),a.Bb(3),a.Kc(a.kc(11,15,o.exception,0,65)),a.Bb(3),a.Kc(o.level),a.Bb(2),a.Kc(o.logger)}}var x,A=((x=function(){function t(e,o){_classCallCheck(this,t),this.logService=e,this.fb=o,this.timeOptions=[{name:"Mas nuevos",value:"Newest"},{name:"Mas viejos",value:"Oldest"}],this.levelOptions=[{name:"Alta",value:"Error"},{name:"Media",value:"Warn"},{name:"Baja",value:"Info"}],this.logParams=this.logService.getLogParams()}return _createClass(t,[{key:"ngOnInit",value:function(){this.getLogs(),this.createForm()}},{key:"getLogs",value:function(){var t=this;this.logService.getLogsByParams().subscribe((function(e){t.logs=e.data,t.totalCount=e.count}),(function(t){console.log(t)}))}},{key:"onSortSelected",value:function(t){var e=this.logService.getLogParams();e.sort=t,this.logService.setLogParams(e),this.getLogs()}},{key:"onPageChanged",value:function(t){var e=this.logService.getLogParams();e.pageNumber!==t&&(e.pageNumber=t,this.logService.getLogParams(),this.getLogs())}},{key:"createForm",value:function(){this.logForm=this.fb.group({dateFrom:[null,L.r.required],dateTo:[null,L.r.required]})}},{key:"onLevelSelected",value:function(t){var e=this.logService.getLogParams();e.level=t,this.logService.setLogParams(e),this.getLogs()}},{key:"filter",value:function(){var t=this;if(this.logForm.controls.dateFrom.value||this.logForm.controls.dateTo.value){var e=this.logService.getLogParams();e.dateFrom=this.logForm.controls.dateFrom.value,e.dateTo=this.logForm.controls.dateTo.value,this.logService.setLogParams(e),this.logService.getLogsByParams().subscribe((function(e){t.logs=e.data,t.totalCount=e.count}),(function(t){console.log(t)}))}}}]),t}()).\u0275fac=function(t){return new(t||x)(a.Pb(I),a.Pb(L.b))},x.\u0275cmp=a.Jb({type:x,selectors:[["app-logs"]],decls:53,vars:34,consts:[[1,"container","mt-3"],[1,"row","align-items-start"],[1,"col-3"],[1,"text-warning"],[1,"custom-select","mb-3","mb-4",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"col-3","mb-3"],[3,"formGroup"],["formControlName","dateFrom","placeholder","Desde",3,"ngModelChange"],["formControlName","dateTo","placeholder","Hasta",3,"ngModelChange"],[1,"row"],[1,"col-12"],[1,"table","table-hover",2,"cursor","pointer"],[1,"thead-light"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],[3,"pageSize","totalCount","pageNumber","pageChanged"],[3,"selected","value"],[3,"routerLink"]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Vb(1,"div",1),a.Vb(2,"div",2),a.Vb(3,"div"),a.Vb(4,"h4",3),a.Jc(5),a.hc(6,"translate"),a.Ub(),a.Vb(7,"select",4),a.dc("change",(function(t){return e.onSortSelected(t.target.value)})),a.Hc(8,_,2,3,"option",5),a.Ub(),a.Ub(),a.Ub(),a.Vb(9,"div",6),a.Vb(10,"form",7),a.Vb(11,"h4",3),a.Jc(12),a.hc(13,"translate"),a.Ub(),a.Vb(14,"app-datepicker",8),a.dc("ngModelChange",(function(){return e.filter()})),a.Ub(),a.Qb(15,"br"),a.Vb(16,"h4",3),a.Jc(17),a.hc(18,"translate"),a.Ub(),a.Vb(19,"app-datepicker",9),a.dc("ngModelChange",(function(){return e.filter()})),a.Ub(),a.Ub(),a.Ub(),a.Vb(20,"div",6),a.Vb(21,"div"),a.Vb(22,"h4",3),a.Jc(23),a.hc(24,"translate"),a.Ub(),a.Vb(25,"select",4),a.dc("change",(function(t){return e.onLevelSelected(t.target.value)})),a.Hc(26,K,2,3,"option",5),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Vb(27,"div",10),a.Vb(28,"div",11),a.Vb(29,"table",12),a.Vb(30,"thead",13),a.Vb(31,"tr"),a.Vb(32,"th"),a.Jc(33,"#"),a.Ub(),a.Vb(34,"th"),a.Jc(35),a.hc(36,"translate"),a.Ub(),a.Vb(37,"th"),a.Jc(38),a.hc(39,"translate"),a.Ub(),a.Vb(40,"th"),a.Jc(41),a.hc(42,"translate"),a.Ub(),a.Vb(43,"th"),a.Jc(44),a.hc(45,"translate"),a.Ub(),a.Vb(46,"th"),a.Jc(47),a.hc(48,"translate"),a.Ub(),a.Ub(),a.Ub(),a.Vb(49,"tbody"),a.Hc(50,T,16,19,"tr",14),a.Ub(),a.Ub(),a.Vb(51,"div",15),a.Vb(52,"app-pager",16),a.dc("pageChanged",(function(t){return e.onPageChanged(t)})),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&t&&(a.Bb(5),a.Kc(a.ic(6,16,"logs.antiquity")),a.Bb(3),a.nc("ngForOf",e.timeOptions),a.Bb(2),a.nc("formGroup",e.logForm),a.Bb(2),a.Lc("",a.ic(13,18,"logs.dateFrom"),":"),a.Bb(5),a.Lc("",a.ic(18,20,"logs.dateTo"),":"),a.Bb(6),a.Kc(a.ic(24,22,"logs.level")),a.Bb(3),a.nc("ngForOf",e.levelOptions),a.Bb(9),a.Kc(a.ic(36,24,"logs.message")),a.Bb(3),a.Kc(a.ic(39,26,"logs.date")),a.Bb(3),a.Kc(a.ic(42,28,"logs.exception")),a.Bb(3),a.Kc(a.ic(45,30,"logs.level")),a.Bb(3),a.Kc(a.ic(48,32,"logs.component")),a.Bb(3),a.nc("ngForOf",e.logs),a.Bb(2),a.nc("pageSize",e.logParams.pageSize)("totalCount",e.totalCount)("pageNumber",e.logParams.pageNumber))},directives:[r.l,L.t,L.m,L.f,O.a,L.l,L.d,p.a,L.o,L.s,i.d],pipes:[h.c,r.t],styles:[""]}),x),M=function t(e){_classCallCheck(this,t),this.name="",this.description="",this.price=0,this.pictureUrl="",Object.assign(this,e)},N=o("cp0P"),D=o("2ZVE"),j=o("gA0Q"),H=["input"];function E(t,e){if(1&t&&(a.Vb(0,"option",6),a.Jc(1),a.Ub()),2&t){var o=e.$implicit,n=a.gc();a.nc("value",o.id)("selected",o.id===n.selectedId),a.Bb(1),a.Lc(" ",o.name," ")}}function z(t,e){if(1&t&&(a.Vb(0,"span"),a.Jc(1),a.hc(2,"translate"),a.Ub()),2&t){var o=a.gc(2);a.Bb(1),a.Mc("",o.label," ",a.ic(2,2,"select-dropdown.select-dropdown.required"),"")}}function Q(t,e){if(1&t&&(a.Vb(0,"div",7),a.Hc(1,z,3,4,"span",8),a.Ub()),2&t){var o=a.gc();a.oc("id",o.label),a.Bb(1),a.nc("ngIf",null==o.controlDir.control.errors?null:o.controlDir.control.errors.required)}}var $,q,W=((q=function(){function t(e){_classCallCheck(this,t),this.controlDir=e,this.controlDir.valueAccessor=this}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this.controlDir.control,e=t.asyncValidator?[t.asyncValidator]:[];t.setValidators(t.validator?[t.validator]:[]),t.setAsyncValidators(e),t.updateValueAndValidity()}},{key:"onChange",value:function(t){}},{key:"onTouched",value:function(){}},{key:"writeValue",value:function(t){this.input.nativeElement.value=t}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}}]),t}()).\u0275fac=function(t){return new(t||q)(a.Pb(L.k,2))},q.\u0275cmp=a.Jb({type:q,selectors:[["app-select-dropdown"]],viewQuery:function(t,e){var o;1&t&&a.Ec(H,!0),2&t&&a.wc(o=a.ec())&&(e.input=o.first)},inputs:{label:"label",Items:"Items",selectedId:"selectedId"},decls:6,vars:4,consts:[[1,"form-label-group"],[1,"form-control",3,"id","ngClass","change","blur"],["input",""],["value","null","label","-- Seleccionar --","disabled","","selected","selected"],[3,"value","selected",4,"ngFor","ngForOf"],["class","invalid-feedback d-block",3,"id",4,"ngIf"],[3,"value","selected"],[1,"invalid-feedback","d-block",3,"id"],[4,"ngIf"]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Vb(1,"select",1,2),a.dc("change",(function(t){return e.onChange(t.target.value-0)}))("blur",(function(){return e.onTouched()})),a.Qb(3,"option",3),a.Hc(4,E,2,3,"option",4),a.Ub(),a.Hc(5,Q,2,2,"div",5),a.Ub()),2&t&&(a.Bb(1),a.oc("id",e.label),a.nc("ngClass",e.controlDir&&e.controlDir.control&&e.controlDir.control.touched?e.controlDir.control.valid?"is-valid":"is-invalid":null),a.Bb(3),a.nc("ngForOf",e.Items),a.Bb(1),a.nc("ngIf",e.controlDir&&e.controlDir.control&&!e.controlDir.control.valid&&e.controlDir.control.touched))},directives:[r.k,L.o,L.s,r.l,r.m],pipes:[h.c],styles:[""]}),q),R=(($=function(){function t(e,o,n){_classCallCheck(this,t),this.route=e,this.adminService=o,this.router=n}return _createClass(t,[{key:"ngOnInit",value:function(){this.createEditProductForm(),this.editProductForm.patchValue(this.product)}},{key:"createEditProductForm",value:function(){this.editProductForm=new L.e({name:new L.c("",L.r.required),price:new L.c(0,[L.r.required,L.r.min(.01),this.regexValidator(new RegExp("\\$?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(\\.[0-9][0-9])?$"),{noDecimal:!0})]),description:new L.c(null,L.r.required),productBrandId:new L.c(null,L.r.required),productTypeId:new L.c(null,L.r.required)})}},{key:"onSubmit",value:function(){var t=this;if("edit"===this.route.snapshot.url[0].path){var e=Object.assign(Object.assign(Object.assign({},this.product),this.editProductForm.value),{price:+this.editProductForm.get("price").value});this.adminService.updateProduct(e,+this.route.snapshot.paramMap.get("id")).subscribe((function(){t.router.navigate(["/admin"])}),(function(t){return console.log(t)}))}else{var o=Object.assign(Object.assign({},this.editProductForm.value),{price:+this.editProductForm.get("price").value});this.adminService.createProduct(o).subscribe((function(){t.router.navigate(["/admin"])}),(function(t){return console.log(t)}))}}},{key:"regexValidator",value:function(t,e){return function(o){return o.value?t.test(o.value)?null:e:null}}}]),t}()).\u0275fac=function(t){return new(t||$)(a.Pb(i.a),a.Pb(d),a.Pb(i.c))},$.\u0275cmp=a.Jb({type:$,selectors:[["app-edit-product-form"]],inputs:{product:"product",brands:"brands",types:"types"},decls:23,vars:22,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["formControlName","name",3,"label"],["formControlName","price",3,"label","type"],[1,"form-group","col-md-12"],["formControlName","description",3,"label","type"],["formControlName","productTypeId",3,"label","Items","selectedId"],["formControlName","productBrandId",3,"label","Items","selectedId"],["type","submit",1,"btn","btn-primary","my-3","float-right",3,"disabled"]],template:function(t,e){1&t&&(a.Vb(0,"form",0),a.dc("ngSubmit",(function(){return e.onSubmit()})),a.Vb(1,"div",1),a.Vb(2,"div",2),a.Qb(3,"app-text-input",3),a.Ub(),a.Vb(4,"div",2),a.Qb(5,"app-text-input",4),a.Ub(),a.Ub(),a.Vb(6,"div",1),a.Vb(7,"div",5),a.Qb(8,"app-text-input",6),a.Ub(),a.Ub(),a.Vb(9,"div",1),a.Vb(10,"div",2),a.Vb(11,"label"),a.Jc(12),a.hc(13,"translate"),a.Ub(),a.Qb(14,"app-select-dropdown",7),a.Ub(),a.Vb(15,"div",2),a.Vb(16,"label"),a.Jc(17),a.hc(18,"translate"),a.Ub(),a.Qb(19,"app-select-dropdown",8),a.Ub(),a.Ub(),a.Vb(20,"button",9),a.Jc(21),a.hc(22,"translate"),a.Ub(),a.Ub()),2&t&&(a.nc("formGroup",e.editProductForm),a.Bb(3),a.nc("label","Nombre"),a.Bb(2),a.nc("label","Precio")("type","number"),a.Bb(3),a.nc("label","Descripcion")("type","textarea"),a.Bb(4),a.Kc(a.ic(13,16,"edit-product-form.categories")),a.Bb(2),a.nc("label","Categorias")("Items",e.types)("selectedId",e.product.productTypeId),a.Bb(3),a.Kc(a.ic(18,18,"edit-product-form.brands")),a.Bb(2),a.nc("label","Marcas")("Items",e.brands)("selectedId",e.product.productBrandId),a.Bb(1),a.nc("disabled",e.editProductForm.invalid),a.Bb(1),a.Kc(a.ic(22,20,"edit-product-form.send")))},directives:[L.t,L.m,L.f,j.a,L.l,L.d,W],pipes:[h.c],styles:[""]}),$),Y=o("EApP"),G=o("YD+O"),Z=o("tq8E");function X(t,e){if(1&t){var o=a.Wb();a.Tb(0),a.Qb(1,"img",7),a.Vb(2,"button",8),a.dc("click",(function(){return a.Ac(o),a.gc().onUpload()})),a.Jc(3),a.hc(4,"translate"),a.Ub(),a.Sb()}if(2&t){var n=a.gc();a.Bb(1),a.nc("src",n.croppedImage,a.Cc),a.Bb(2),a.Kc(a.ic(4,2,"photo-widget.photo-widget.uploadImage"))}}var tt,et=((tt=function(){function t(){_classCallCheck(this,t),this.addFile=new a.n,this.files=[],this.imageChangedEvent="",this.croppedImage=""}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onSelect",value:function(t){var e;this.files=[],(e=this.files).push.apply(e,_toConsumableArray(t.addedFiles)),this.fileChangeEvent(this.files[0])}},{key:"fileChangeEvent",value:function(t){this.imageChangedEvent=t}},{key:"imageCropped",value:function(t){this.croppedImage=t.base64}},{key:"onUpload",value:function(){console.log(Object(G.c)(this.croppedImage)),this.addFile.emit(Object(G.c)(this.croppedImage))}}]),t}()).\u0275fac=function(t){return new(t||tt)},tt.\u0275cmp=a.Jb({type:tt,selectors:[["app-photo-widget"]],outputs:{addFile:"addFile"},decls:21,vars:17,consts:[[1,"row"],[1,"col-4"],["ngx-dropzone","",1,"custom-dropzone",3,"change"],[1,"fa","fa-upload","fa-4x"],[1,"col-4","img-preview"],["format","png",1,"img-fluid",3,"imageChangedEvent","imageFile","maintainAspectRatio","aspectRatio","imageCropped"],[4,"ngIf"],[1,"img-fluid",3,"src"],[1,"btn-block","btn-primary",3,"click"]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Vb(1,"div",1),a.Vb(2,"h3"),a.Jc(3),a.hc(4,"translate"),a.Ub(),a.Vb(5,"div",2),a.dc("change",(function(t){return e.onSelect(t)})),a.Vb(6,"ngx-dropzone-label"),a.Qb(7,"i",3),a.Vb(8,"h4"),a.Jc(9),a.hc(10,"translate"),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Vb(11,"div",4),a.Vb(12,"h3"),a.Jc(13),a.hc(14,"translate"),a.Ub(),a.Vb(15,"image-cropper",5),a.dc("imageCropped",(function(t){return e.imageCropped(t)})),a.Ub(),a.Ub(),a.Vb(16,"div",1),a.Vb(17,"h3"),a.Jc(18),a.hc(19,"translate"),a.Ub(),a.Hc(20,X,5,4,"ng-container",6),a.Ub(),a.Ub()),2&t&&(a.Bb(3),a.Kc(a.ic(4,9,"photo-widget.photo-widget.step1")),a.Bb(6),a.Kc(a.ic(10,11,"photo-widget.photo-widget.dropImage")),a.Bb(4),a.Kc(a.ic(14,13,"photo-widget.photo-widget.step2")),a.Bb(2),a.nc("imageChangedEvent",e.imageChangedEvent)("imageFile",e.files[0])("maintainAspectRatio",!0)("aspectRatio",1),a.Bb(3),a.Kc(a.ic(19,15,"photo-widget.photo-widget.step3")),a.Bb(2),a.nc("ngIf",e.croppedImage))},directives:[Z.a,Z.c,G.a,r.m],pipes:[h.c],styles:[".custom-dropzone[_ngcontent-%COMP%]{border:3px dashed #eee;border-radius:5px;padding-top:30px;text-align:center;height:200px}.custom-dropzone.ngx-dz-hovered[_ngcontent-%COMP%]{border:3px solid green}"]}),tt);function ot(t,e){if(1&t){var o=a.Wb();a.Vb(0,"div",7),a.Vb(1,"div",8),a.Qb(2,"img",9),a.Vb(3,"div",10),a.Vb(4,"button",11),a.dc("click",(function(){a.Ac(o);var t=e.$implicit;return a.gc(2).setMainPhoto(t.id)})),a.Jc(5," Principal "),a.Ub(),a.Vb(6,"button",12),a.dc("click",(function(){a.Ac(o);var t=e.$implicit;return a.gc(2).deletePhoto(t.id)})),a.Qb(7,"i",13),a.Ub(),a.Ub(),a.Ub(),a.Ub()}if(2&t){var n=e.$implicit;a.Bb(2),a.oc("src",n.pictureUrl,a.Cc),a.oc("alt",n.fileName),a.Bb(2),a.Db(n.isMain?"btn btn-success":"btn btn-outline-success"),a.nc("disabled",n.isMain),a.Bb(2),a.nc("disabled",n.isMain)}}function nt(t,e){if(1&t){var o=a.Wb();a.Tb(0),a.Vb(1,"div",3),a.Vb(2,"h3"),a.Jc(3),a.hc(4,"translate"),a.Ub(),a.Vb(5,"button",4),a.dc("click",(function(){return a.Ac(o),a.gc().addPhotoModeToggle()})),a.Jc(6),a.hc(7,"translate"),a.Ub(),a.Ub(),a.Vb(8,"div",5),a.Hc(9,ot,8,7,"div",6),a.Ub(),a.Sb()}if(2&t){var n=a.gc();a.Bb(3),a.Kc(a.ic(4,3,"edit-product-photo.productPhoto")),a.Bb(3),a.Lc(" ",a.ic(7,5,"edit-product-photo.addPhoto")," "),a.Bb(3),a.nc("ngForOf",null==n.product?null:n.product.photos)}}function rt(t,e){if(1&t&&(a.Vb(0,"div",17),a.Vb(1,"div",18),a.Jc(2),a.Ub(),a.Ub()),2&t){var o=a.gc(2);a.Bb(1),a.Gc("width",o.progress,"%"),a.Bb(1),a.Lc(" ",o.progress,"% ")}}function ct(t,e){if(1&t){var o=a.Wb();a.Tb(0),a.Vb(1,"div",3),a.Vb(2,"h3"),a.Jc(3),a.hc(4,"translate"),a.Ub(),a.Vb(5,"button",14),a.dc("click",(function(){return a.Ac(o),a.gc().addPhotoModeToggle()})),a.Jc(6),a.hc(7,"translate"),a.Ub(),a.Ub(),a.Hc(8,rt,3,3,"div",15),a.Vb(9,"app-photo-widget",16),a.dc("addFile",(function(t){return a.Ac(o),a.gc().uploadFile(t)})),a.Ub(),a.Sb()}if(2&t){var n=a.gc();a.Bb(3),a.Kc(a.ic(4,3,"edit-product-photo.addPhoto")),a.Bb(3),a.Lc(" ",a.ic(7,5,"edit-product-photo.cancel")," "),a.Bb(2),a.nc("ngIf",n.progress>0)}}var it,at,st=((at=function(){function t(e,o){_classCallCheck(this,t),this.adminService=e,this.toast=o,this.progress=0,this.addPhotoMode=!1}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"addPhotoModeToggle",value:function(){this.addPhotoMode=!this.addPhotoMode}},{key:"uploadFile",value:function(t){var e=this;this.adminService.uploadImage(t,this.product.id).subscribe((function(t){switch(t.type){case b.d.UploadProgress:e.progress=Math.round(t.loaded/t.total*100);break;case b.d.Response:e.product=t.body,setTimeout((function(){e.progress=0,e.addPhotoMode=!1}),1500)}}),(function(t){e.toast.error(t.errors?t.errors[0]:"Problema al cargar imagen"),e.progress=0}))}},{key:"deletePhoto",value:function(t){var e=this;this.adminService.deleteProductPhoto(t,this.product.id).subscribe((function(){var o=e.product.photos.findIndex((function(e){return e.id===t}));e.product.photos.splice(o,1)}),(function(t){e.toast.error("Problema al borrar imagen"),console.log(t)}))}},{key:"setMainPhoto",value:function(t){var e=this;this.adminService.setMainPhoto(t,this.product.id).subscribe((function(t){e.product=t}))}}]),t}()).\u0275fac=function(t){return new(t||at)(a.Pb(d),a.Pb(Y.b))},at.\u0275cmp=a.Jb({type:at,selectors:[["app-edit-product-photos"]],inputs:{product:"product"},decls:4,vars:2,consts:[[1,"py-5"],[1,"container"],[4,"ngIf"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"row"],["class","col-3",4,"ngFor","ngForOf"],[1,"col-3"],[1,"card"],["width","100%","height","225",1,"card-img-top",3,"src","alt"],[1,"btn-group",2,"width","100%"],["type","button",2,"width","50%",3,"disabled","click"],["type","button",1,"btn","btn-outline-danger",2,"width","50%",3,"disabled","click"],[1,"fa","fa-trash"],[1,"btn","btn-outline-secondary",3,"click"],["class","progress form-group",4,"ngIf"],[3,"addFile"],[1,"progress","form-group"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success"]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Vb(1,"div",1),a.Hc(2,nt,10,7,"ng-container",2),a.Hc(3,ct,10,7,"ng-container",2),a.Ub(),a.Ub()),2&t&&(a.Bb(2),a.nc("ngIf",!e.addPhotoMode),a.Bb(1),a.nc("ngIf",e.addPhotoMode))},directives:[r.m,r.l,et],pipes:[h.c],styles:[""]}),at),lt=((it=function(){function t(e,o){_classCallCheck(this,t),this.shopService=e,this.route=o,this.productFormValues=new M}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this,e=this.getBrands(),o=this.getTypes();Object(N.a)([o,e]).subscribe((function(e){t.brands=e[0],t.types=e[1]}),(function(t){return console.log(t)}),(function(){"edit"===t.route.snapshot.url[0].path&&t.loadProduct()}))}},{key:"loadProduct",value:function(){var t=this,e=+this.route.snapshot.paramMap.get("id");this.shopService.getProduct(e).subscribe((function(e){var o=t.brands&&t.brands.find((function(t){return t.name===e.productBrand})).id,n=t.types&&t.types.find((function(t){return t.name===e.productType})).id;t.product=e,t.productFormValues=Object.assign(Object.assign({},e),{productBrandId:o,productTypeId:n})}))}},{key:"getTypes",value:function(){return this.shopService.getBrands()}},{key:"getBrands",value:function(){return this.shopService.getTypes()}}]),t}()).\u0275fac=function(t){return new(t||it)(a.Pb(s.a),a.Pb(i.a))},it.\u0275cmp=a.Jb({type:it,selectors:[["app-edit-product"]],decls:13,vars:10,consts:[[1,"product-edit","mt-5"],[1,"container"],[1,"row"],[1,"col-12"],[1,"tab-panel"],[1,"product-tabset"],[3,"heading"],[1,"col-lg-8"],[3,"product","brands","types"],[3,"product"]],template:function(t,e){1&t&&(a.Vb(0,"section",0),a.Vb(1,"div",1),a.Vb(2,"div",2),a.Vb(3,"div",3),a.Vb(4,"div",4),a.Vb(5,"tabset",5),a.Vb(6,"tab",6),a.hc(7,"translate"),a.Vb(8,"div",7),a.Qb(9,"app-edit-product-form",8),a.Ub(),a.Ub(),a.Vb(10,"tab",6),a.hc(11,"translate"),a.Qb(12,"app-edit-product-photos",9),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&t&&(a.Bb(6),a.oc("heading",a.ic(7,6,"edit-product.editHeading")),a.Bb(3),a.nc("product",e.productFormValues)("brands",e.brands)("types",e.types),a.Bb(1),a.oc("heading",a.ic(11,8,"edit-product.editPhotoHeading")),a.Bb(2),a.nc("product",e.product))},directives:[D.c,D.a,R,st],pipes:[h.c],styles:[""]}),it),bt=o("2rwd");function dt(t,e){if(1&t){var o=a.Wb();a.Vb(0,"div"),a.Vb(1,"a",10),a.Vb(2,"i",11),a.dc("click",(function(){a.Ac(o);var t=a.gc().$implicit;return a.gc().disableUser(t)})),a.Ub(),a.Ub(),a.Ub()}}function ut(t,e){if(1&t){var o=a.Wb();a.Vb(0,"div"),a.Vb(1,"a",12),a.Vb(2,"i",11),a.dc("click",(function(){a.Ac(o);var t=a.gc().$implicit;return a.gc().enableUser(t)})),a.Ub(),a.Ub(),a.Ub()}}function pt(t,e){if(1&t&&(a.Vb(0,"tr",7),a.Vb(1,"td",8),a.Vb(2,"strong"),a.Jc(3),a.Ub(),a.Ub(),a.Vb(4,"td",8),a.Vb(5,"strong"),a.Jc(6),a.Ub(),a.Ub(),a.Vb(7,"td",8),a.Vb(8,"strong"),a.Jc(9),a.Ub(),a.Ub(),a.Vb(10,"td",8),a.Hc(11,dt,3,0,"div",9),a.Hc(12,ut,3,0,"div",9),a.Ub(),a.Ub()),2&t){var o=e.$implicit,n=e.index;a.Bb(3),a.Kc(n),a.Bb(3),a.Kc(o.displayName),a.Bb(3),a.Kc(o.email),a.Bb(2),a.nc("ngIf",o.active),a.Bb(1),a.nc("ngIf",!o.active)}}var ht,gt,ft,mt=[{path:"",component:P},{path:"create",component:lt,data:{breadcrumb:"Crear"}},{path:"edit/:id",component:lt,data:{breadcrumb:"Editar"}},{path:"logs",component:A,data:{breadcrumb:"Bitacora"}},{path:"users",component:(ht=function(){function t(e,o,n,r){_classCallCheck(this,t),this.fb=e,this.admin=o,this.account=n,this.toast=r}return _createClass(t,[{key:"ngOnInit",value:function(){this.currentUser=this.account.getCurrentUser(),this.loadUsers()}},{key:"loadUsers",value:function(){var t=this;this.admin.getAllUsers().subscribe((function(e){t.users=e.filter((function(e){return e.email!=t.currentUser.email}))}),(function(t){console.log(t)}))}},{key:"disableUser",value:function(t){var e=this;this.account.disableUser({userName:t.email}).subscribe((function(t){t&&(e.toast.success("Usuario deshabilitado"),e.loadUsers(),setTimeout((function(){}),3e3))}),(function(t){console.log(t)}))}},{key:"enableUser",value:function(t){var e=this;this.account.enableUser({userName:t.email}).subscribe((function(t){t&&(e.toast.success("Usuario habilitado"),e.loadUsers(),setTimeout((function(){}),3e3))}),(function(t){console.log(t)}))}}]),t}(),ht.\u0275fac=function(t){return new(t||ht)(a.Pb(L.b),a.Pb(d),a.Pb(bt.a),a.Pb(Y.b))},ht.\u0275cmp=a.Jb({type:ht,selectors:[["app-users"]],decls:19,vars:7,consts:[[1,"table-responsive"],[1,"container","mt-5"],[1,"row"],[1,"col-12"],[1,"table","table-hover",2,"cursor","pointer"],[1,"thead-light"],["class","border-0",4,"ngFor","ngForOf"],[1,"border-0"],[1,"align-middle"],[4,"ngIf"],[1,"text-danger","ml-5"],[1,"fa","fa-user",2,"font-size","2em","cursor","pointer",3,"click"],[1,"text-success","ml-5"]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Vb(1,"div",1),a.Vb(2,"div",2),a.Vb(3,"div",3),a.Vb(4,"table",4),a.Vb(5,"thead",5),a.Vb(6,"tr"),a.Vb(7,"th"),a.Jc(8,"#"),a.Ub(),a.Vb(9,"th"),a.Jc(10),a.hc(11,"translate"),a.Ub(),a.Vb(12,"th"),a.Jc(13,"Email"),a.Ub(),a.Vb(14,"th"),a.Jc(15),a.hc(16,"translate"),a.Ub(),a.Ub(),a.Ub(),a.Vb(17,"tbody"),a.Hc(18,pt,13,5,"tr",6),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&t&&(a.Bb(10),a.Kc(a.ic(11,3,"users.name")),a.Bb(5),a.Kc(a.ic(16,5,"users.enableDisable")),a.Bb(3),a.nc("ngForOf",e.users))},directives:[r.l,r.m],pipes:[h.c],styles:[""]}),ht),data:{breadcrumb:"Usuarios"}},{path:"logs/:id",component:F,data:{breadcrumb:"Detalle"}}],vt=((ft=function t(){_classCallCheck(this,t)}).\u0275mod=a.Nb({type:ft}),ft.\u0275inj=a.Mb({factory:function(t){return new(t||ft)},imports:[[i.g.forChild(mt)],i.g]}),ft),Ut=((gt=function t(){_classCallCheck(this,t)}).\u0275mod=a.Nb({type:gt}),gt.\u0275inj=a.Mb({factory:function(t){return new(t||gt)},imports:[[r.c,c.a,vt,h.b]]}),gt)}}]);