(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{jkDv:function(t,e,o){"use strict";o.r(e),o.d(e,"AdminModule",(function(){return st}));var c=o("SVse"),r=o("PCNd"),i=o("iInd"),s=o("8Y7J"),n=o("mwRl"),a=o("AytR"),b=o("IheW");let d=(()=>{class t{constructor(t){this.http=t,this.baseUrl=a.a.apiUrl}createProduct(t){return this.http.post(this.baseUrl+"products",t)}updateProduct(t,e){return this.http.put(this.baseUrl+"products/"+e,t)}deleteProduct(t){return this.http.delete(this.baseUrl+"products/"+t)}uploadImage(t,e){const o=new FormData;return o.append("photo",t,"image.png"),this.http.put(this.baseUrl+"products/"+e+"/photo",o,{reportProgress:!0,observe:"events"})}deleteProductPhoto(t,e){return this.http.delete(this.baseUrl+"products/"+e+"/photo"+t)}setMainPhoto(t,e){return this.http.post(this.baseUrl+"products/"+e+"/photo/"+t,{})}getAllUsers(){return this.http.get(this.baseUrl+"account/getallusers")}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(b.b))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=o("/gyc"),p=o("a4eG"),u=o("TSSN");const g=function(t){return["edit",t]};function h(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr"),s.Vb(1,"td",18),s.Jc(2),s.Ub(),s.Vb(3,"td"),s.Vb(4,"div",12),s.Qb(5,"img",19),s.Ub(),s.Ub(),s.Vb(6,"th",18),s.Vb(7,"h5"),s.Jc(8),s.Ub(),s.Ub(),s.Vb(9,"td",18),s.Jc(10),s.hc(11,"currency"),s.Ub(),s.Vb(12,"td",18),s.Vb(13,"button",20),s.Jc(14),s.hc(15,"translate"),s.Ub(),s.Ub(),s.Vb(16,"td",18),s.Vb(17,"button",21),s.dc("click",(function(){s.Ac(t);const o=e.$implicit;return s.gc(2).deleteProduct(o.id)})),s.Jc(18),s.hc(19,"translate"),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=e.$implicit;s.Bb(2),s.Kc(t.id),s.Bb(3),s.oc("src",t.pictureUrl||"/assets/images/placeholder.png",s.Cc),s.oc("alt",t.name),s.Bb(3),s.Kc(t.name),s.Bb(2),s.Kc(s.ic(11,8,t.price)),s.Bb(3),s.nc("routerLink",s.rc(14,g,t.id)),s.Bb(1),s.Kc(s.ic(15,10,"adminProduct.edit")),s.Bb(4),s.Kc(s.ic(19,12,"adminProduct.delete"))}}function m(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div",22),s.Vb(1,"app-pager",23),s.dc("pageChanged",(function(e){return s.Ac(t),s.gc(2).onPageChanged(e)})),s.Ub(),s.Ub()}if(2&t){const t=s.gc(2);s.Bb(1),s.nc("pageSize",t.shopParams.pageSize)("pageNumber",t.shopParams.pageNumber)("totalCount",t.totalCount)}}const f=function(){return["/admin/create"]};function v(t,e){if(1&t&&(s.Vb(0,"section",1),s.Vb(1,"div",2),s.Vb(2,"div",3),s.Vb(3,"div",4),s.Vb(4,"div",5),s.Vb(5,"header",6),s.Jc(6),s.hc(7,"translate"),s.Ub(),s.Vb(8,"button",7),s.Jc(9),s.hc(10,"translate"),s.Ub(),s.Ub(),s.Qb(11,"app-paging-header",8),s.Vb(12,"div",9),s.Vb(13,"table",10),s.Vb(14,"thead"),s.Vb(15,"tr"),s.Vb(16,"th",11),s.Vb(17,"div",12),s.Jc(18,"#"),s.Ub(),s.Ub(),s.Vb(19,"th",11),s.Vb(20,"div",13),s.Jc(21),s.hc(22,"translate"),s.Ub(),s.Ub(),s.Vb(23,"th",11),s.Vb(24,"div",14),s.Jc(25),s.hc(26,"translate"),s.Ub(),s.Ub(),s.Vb(27,"th",11),s.Vb(28,"div",15),s.Jc(29),s.hc(30,"translate"),s.Ub(),s.Ub(),s.Vb(31,"th",11),s.Vb(32,"div",15),s.Jc(33),s.hc(34,"translate"),s.Ub(),s.Ub(),s.Vb(35,"th",11),s.Vb(36,"div",15),s.Jc(37),s.hc(38,"translate"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(39,"tbody"),s.Hc(40,h,20,16,"tr",16),s.Ub(),s.Ub(),s.Ub(),s.Hc(41,m,2,3,"div",17),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&t){const t=s.gc();s.Bb(6),s.Kc(s.ic(7,13,"adminProduct.productList")),s.Bb(2),s.nc("routerLink",s.qc(27,f)),s.Bb(1),s.Kc(s.ic(10,15,"adminProduct.addNewProduct")),s.Bb(2),s.nc("totalCount",t.totalCount)("pageSize",t.shopParams.pageSize)("pageNumber",t.shopParams.pageNumber),s.Bb(10),s.Kc(s.ic(22,17,"adminProduct.product")),s.Bb(4),s.Kc(s.ic(26,19,"adminProduct.name")),s.Bb(4),s.Kc(s.ic(30,21,"adminProduct.price")),s.Bb(4),s.Kc(s.ic(34,23,"adminProduct.edit")),s.Bb(4),s.Kc(s.ic(38,25,"adminProduct.delete")),s.Bb(3),s.nc("ngForOf",t.products),s.Bb(1),s.nc("ngIf",t.totalCount>0)}}let U=(()=>{class t{constructor(t,e){this.shopService=t,this.adminservice=e,this.shopParams=this.shopService.getShopParams()}ngOnInit(){this.getProducts()}getProducts(t=!1){this.shopService.getProducts(t).subscribe(t=>{this.products=t.data,this.totalCount=t.count},t=>console.log(t))}onPageChanged(t){const e=this.shopService.getShopParams();e.pageNumber!==t&&(e.pageNumber=t,this.shopService.setShopParams(e),this.getProducts(!0))}deleteProduct(t){this.adminservice.deleteProduct(t).subscribe(()=>{this.products.splice(this.products.findIndex(e=>e.id===t),1),this.totalCount--,this.shopParams.pageSize*(this.shopParams.pageNumber-1)===this.totalCount&&(this.shopParams.pageNumber--,this.shopService.setShopParams(this.shopParams),this.getProducts())},t=>console.log(t))}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.a),s.Pb(d))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-admin"]],decls:1,vars:1,consts:[["class","admin-page",4,"ngIf"],[1,"admin-page"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"d-flex","justify-content-between","my-3"],[1,"h2"],[1,"btn","btn-outline-success",3,"routerLink"],[3,"totalCount","pageSize","pageNumber"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"p-2"],[1,"p-2","text-uppercase"],[1,"py-2","text-uppercase"],[1,"p-2","px-3","text-uppercase"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"align-middle"],[1,"img-fluid",2,"max-height","50px",3,"src","alt"],[1,"btn","btn-warning",3,"routerLink"],[1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-center"],[3,"pageSize","pageNumber","totalCount","pageChanged"]],template:function(t,e){1&t&&s.Hc(0,v,42,28,"section",0),2&t&&s.nc("ngIf",e.products)},directives:[c.m,i.d,l.a,c.l,p.a],pipes:[u.c,c.d],styles:[""]}),t})();class V{constructor(){this.sort="Newest",this.pageNumber=1,this.pageSize=6,this.level="Error"}}class P{constructor(){this.data=[]}}var B=o("lJxs"),y=o("wd/R");let w=(()=>{class t{constructor(t){this.http=t,this.baseUrl=a.a.apiUrl,this.logParams=new V,this.pagination=new P}getLogsByParams(){let t=new b.f;return t=t.append("sort",this.logParams.sort),t=t.append("pageIndex",this.logParams.pageNumber.toString()),t=t.append("pageSize",this.logParams.pageSize.toString()),t=t.append("level",this.logParams.level),this.logParams&&(this.logParams.dateFrom&&(this.logParams.dateFrom=y(this.logParams.dateFrom).format("YYYY-MM-DD"),t=t.append("dateFrom",this.logParams.dateFrom)),this.logParams.dateTo&&(this.logParams.dateTo=y(this.logParams.dateTo).format("YYYY-MM-DD"),t=t.append("dateTo",this.logParams.dateTo))),this.http.get(this.baseUrl+"logs",{observe:"response",params:t}).pipe(Object(B.a)(t=>(this.pagination=t.body,this.pagination)))}getLogDetailed(t){return this.http.get(this.baseUrl+"logs/"+t)}getLogParams(){return this.logParams}setLogParams(t){this.logParams=t}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(b.b))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function J(t,e){if(1&t&&(s.Vb(0,"div",1),s.Vb(1,"div",2),s.Vb(2,"div",3),s.Vb(3,"h3"),s.Jc(4),s.Ub(),s.Ub(),s.Ub(),s.Vb(5,"div",2),s.Vb(6,"div",4),s.Vb(7,"h4"),s.Jc(8),s.hc(9,"translate"),s.Ub(),s.Vb(10,"p"),s.Jc(11),s.hc(12,"slice"),s.Ub(),s.Ub(),s.Ub(),s.Vb(13,"div",2),s.Vb(14,"div",5),s.Vb(15,"h4"),s.Jc(16),s.hc(17,"translate"),s.Ub(),s.Vb(18,"p"),s.Jc(19),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&t){const t=s.gc();s.Bb(4),s.Lc("Log n\xb0: ",t.log.id,""),s.Bb(4),s.Kc(s.ic(9,5,"logs.message")),s.Bb(3),s.Kc(s.kc(12,7,t.log.message,0,130)),s.Bb(5),s.Kc(s.ic(17,11,"logs.exception")),s.Bb(3),s.Kc(t.log.exception)}}let I=(()=>{class t{constructor(t,e){this.logService=t,this.activatedRoute=e}ngOnInit(){this.loadLog()}loadLog(){this.logService.getLogDetailed(+this.activatedRoute.snapshot.paramMap.get("id")).subscribe(t=>{this.log=t},t=>console.log(t))}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(w),s.Pb(i.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-log-detail"]],decls:1,vars:1,consts:[["class","container mt-5",4,"ngIf"],[1,"container","mt-5"],[1,"row"],[1,"col-12"],[1,"col-6"],[1,"col-12","ml-3"]],template:function(t,e){1&t&&s.Hc(0,J,20,13,"div",0),2&t&&s.nc("ngIf",e.log)},directives:[c.m],pipes:[u.c,c.t],styles:[""]}),t})();var S=o("s7LF"),F=o("VfTn");function C(t,e){if(1&t&&(s.Vb(0,"option",17),s.Jc(1),s.Ub()),2&t){const t=e.$implicit,o=s.gc();s.nc("selected",o.logParams.sort===t.value)("value",t.value),s.Bb(1),s.Kc(t.name)}}function K(t,e){if(1&t&&(s.Vb(0,"option",17),s.Jc(1),s.Ub()),2&t){const t=e.$implicit,o=s.gc();s.nc("selected",o.logParams.sort===t.value)("value",t.value),s.Bb(1),s.Kc(t.name)}}function L(t,e){if(1&t&&(s.Vb(0,"tr",18),s.Vb(1,"th"),s.Jc(2),s.Ub(),s.Vb(3,"td"),s.Jc(4),s.hc(5,"slice"),s.Ub(),s.Vb(6,"td"),s.Jc(7),s.hc(8,"slice"),s.Ub(),s.Vb(9,"td"),s.Jc(10),s.hc(11,"slice"),s.Ub(),s.Vb(12,"td"),s.Jc(13),s.Ub(),s.Vb(14,"td"),s.Jc(15),s.Ub(),s.Ub()),2&t){const t=e.$implicit;s.oc("routerLink",t.id),s.Bb(2),s.Kc(t.id),s.Bb(2),s.Kc(s.kc(5,7,t.message,0,30)),s.Bb(3),s.Kc(s.kc(8,11,t.logged,0,10)),s.Bb(3),s.Kc(s.kc(11,15,t.exception,0,65)),s.Bb(3),s.Kc(t.level),s.Bb(2),s.Kc(t.logger)}}let O=(()=>{class t{constructor(t,e){this.logService=t,this.fb=e,this.timeOptions=[{name:"Mas nuevos",value:"Newest"},{name:"Mas viejos",value:"Oldest"}],this.levelOptions=[{name:"Alta",value:"Error"},{name:"Media",value:"Warn"},{name:"Baja",value:"Info"}],this.logParams=this.logService.getLogParams()}ngOnInit(){this.getLogs(),this.createForm()}getLogs(){this.logService.getLogsByParams().subscribe(t=>{this.logs=t.data,this.totalCount=t.count},t=>{console.log(t)})}onSortSelected(t){const e=this.logService.getLogParams();e.sort=t,this.logService.setLogParams(e),this.getLogs()}onPageChanged(t){const e=this.logService.getLogParams();e.pageNumber!==t&&(e.pageNumber=t,this.logService.getLogParams(),this.getLogs())}createForm(){this.logForm=this.fb.group({dateFrom:[null,S.r.required],dateTo:[null,S.r.required]})}onLevelSelected(t){const e=this.logService.getLogParams();e.level=t,this.logService.setLogParams(e),this.getLogs()}filter(){if(this.logForm.controls.dateFrom.value||this.logForm.controls.dateTo.value){const t=this.logService.getLogParams();t.dateFrom=this.logForm.controls.dateFrom.value,t.dateTo=this.logForm.controls.dateTo.value,this.logService.setLogParams(t),this.logService.getLogsByParams().subscribe(t=>{this.logs=t.data,this.totalCount=t.count},t=>{console.log(t)})}}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(w),s.Pb(S.b))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-logs"]],decls:53,vars:34,consts:[[1,"container","mt-3"],[1,"row","align-items-start"],[1,"col-3"],[1,"text-warning"],[1,"custom-select","mb-3","mb-4",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"col-3","mb-3"],[3,"formGroup"],["formControlName","dateFrom","placeholder","Desde",3,"ngModelChange"],["formControlName","dateTo","placeholder","Hasta",3,"ngModelChange"],[1,"row"],[1,"col-12"],[1,"table","table-hover",2,"cursor","pointer"],[1,"thead-light"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],[3,"pageSize","totalCount","pageNumber","pageChanged"],[3,"selected","value"],[3,"routerLink"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.Vb(2,"div",2),s.Vb(3,"div"),s.Vb(4,"h4",3),s.Jc(5),s.hc(6,"translate"),s.Ub(),s.Vb(7,"select",4),s.dc("change",(function(t){return e.onSortSelected(t.target.value)})),s.Hc(8,C,2,3,"option",5),s.Ub(),s.Ub(),s.Ub(),s.Vb(9,"div",6),s.Vb(10,"form",7),s.Vb(11,"h4",3),s.Jc(12),s.hc(13,"translate"),s.Ub(),s.Vb(14,"app-datepicker",8),s.dc("ngModelChange",(function(){return e.filter()})),s.Ub(),s.Qb(15,"br"),s.Vb(16,"h4",3),s.Jc(17),s.hc(18,"translate"),s.Ub(),s.Vb(19,"app-datepicker",9),s.dc("ngModelChange",(function(){return e.filter()})),s.Ub(),s.Ub(),s.Ub(),s.Vb(20,"div",6),s.Vb(21,"div"),s.Vb(22,"h4",3),s.Jc(23),s.hc(24,"translate"),s.Ub(),s.Vb(25,"select",4),s.dc("change",(function(t){return e.onLevelSelected(t.target.value)})),s.Hc(26,K,2,3,"option",5),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(27,"div",10),s.Vb(28,"div",11),s.Vb(29,"table",12),s.Vb(30,"thead",13),s.Vb(31,"tr"),s.Vb(32,"th"),s.Jc(33,"#"),s.Ub(),s.Vb(34,"th"),s.Jc(35),s.hc(36,"translate"),s.Ub(),s.Vb(37,"th"),s.Jc(38),s.hc(39,"translate"),s.Ub(),s.Vb(40,"th"),s.Jc(41),s.hc(42,"translate"),s.Ub(),s.Vb(43,"th"),s.Jc(44),s.hc(45,"translate"),s.Ub(),s.Vb(46,"th"),s.Jc(47),s.hc(48,"translate"),s.Ub(),s.Ub(),s.Ub(),s.Vb(49,"tbody"),s.Hc(50,L,16,19,"tr",14),s.Ub(),s.Ub(),s.Vb(51,"div",15),s.Vb(52,"app-pager",16),s.dc("pageChanged",(function(t){return e.onPageChanged(t)})),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&t&&(s.Bb(5),s.Kc(s.ic(6,16,"logs.antiquity")),s.Bb(3),s.nc("ngForOf",e.timeOptions),s.Bb(2),s.nc("formGroup",e.logForm),s.Bb(2),s.Lc("",s.ic(13,18,"logs.dateFrom"),":"),s.Bb(5),s.Lc("",s.ic(18,20,"logs.dateTo"),":"),s.Bb(6),s.Kc(s.ic(24,22,"logs.level")),s.Bb(3),s.nc("ngForOf",e.levelOptions),s.Bb(9),s.Kc(s.ic(36,24,"logs.message")),s.Bb(3),s.Kc(s.ic(39,26,"logs.date")),s.Bb(3),s.Kc(s.ic(42,28,"logs.exception")),s.Bb(3),s.Kc(s.ic(45,30,"logs.level")),s.Bb(3),s.Kc(s.ic(48,32,"logs.component")),s.Bb(3),s.nc("ngForOf",e.logs),s.Bb(2),s.nc("pageSize",e.logParams.pageSize)("totalCount",e.totalCount)("pageNumber",e.logParams.pageNumber))},directives:[c.l,S.t,S.m,S.f,F.a,S.l,S.d,p.a,S.o,S.s,i.d],pipes:[u.c,c.t],styles:[""]}),t})();class k{constructor(t){this.name="",this.description="",this.price=0,this.pictureUrl="",Object.assign(this,t)}}var x=o("cp0P"),M=o("2ZVE"),N=o("gA0Q");const T=["input"];function D(t,e){if(1&t&&(s.Vb(0,"option",6),s.Jc(1),s.Ub()),2&t){const t=e.$implicit,o=s.gc();s.nc("value",t.id)("selected",t.id===o.selectedId),s.Bb(1),s.Lc(" ",t.name," ")}}function j(t,e){if(1&t&&(s.Vb(0,"span"),s.Jc(1),s.hc(2,"translate"),s.Ub()),2&t){const t=s.gc(2);s.Bb(1),s.Mc("",t.label," ",s.ic(2,2,"select-dropdown.select-dropdown.required"),"")}}function A(t,e){if(1&t&&(s.Vb(0,"div",7),s.Hc(1,j,3,4,"span",8),s.Ub()),2&t){const t=s.gc();s.oc("id",t.label),s.Bb(1),s.nc("ngIf",null==t.controlDir.control.errors?null:t.controlDir.control.errors.required)}}let H=(()=>{class t{constructor(t){this.controlDir=t,this.controlDir.valueAccessor=this}ngOnInit(){const t=this.controlDir.control,e=t.asyncValidator?[t.asyncValidator]:[];t.setValidators(t.validator?[t.validator]:[]),t.setAsyncValidators(e),t.updateValueAndValidity()}onChange(t){}onTouched(){}writeValue(t){this.input.nativeElement.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(S.k,2))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-select-dropdown"]],viewQuery:function(t,e){var o;1&t&&s.Ec(T,!0),2&t&&s.wc(o=s.ec())&&(e.input=o.first)},inputs:{label:"label",Items:"Items",selectedId:"selectedId"},decls:6,vars:4,consts:[[1,"form-label-group"],[1,"form-control",3,"id","ngClass","change","blur"],["input",""],["value","null","label","-- Seleccionar --","disabled","","selected","selected"],[3,"value","selected",4,"ngFor","ngForOf"],["class","invalid-feedback d-block",3,"id",4,"ngIf"],[3,"value","selected"],[1,"invalid-feedback","d-block",3,"id"],[4,"ngIf"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Vb(1,"select",1,2),s.dc("change",(function(t){return e.onChange(t.target.value-0)}))("blur",(function(){return e.onTouched()})),s.Qb(3,"option",3),s.Hc(4,D,2,3,"option",4),s.Ub(),s.Hc(5,A,2,2,"div",5),s.Ub()),2&t&&(s.Bb(1),s.oc("id",e.label),s.nc("ngClass",e.controlDir&&e.controlDir.control&&e.controlDir.control.touched?e.controlDir.control.valid?"is-valid":"is-invalid":null),s.Bb(3),s.nc("ngForOf",e.Items),s.Bb(1),s.nc("ngIf",e.controlDir&&e.controlDir.control&&!e.controlDir.control.valid&&e.controlDir.control.touched))},directives:[c.k,S.o,S.s,c.l,c.m],pipes:[u.c],styles:[""]}),t})(),z=(()=>{class t{constructor(t,e,o){this.route=t,this.adminService=e,this.router=o}ngOnInit(){this.createEditProductForm(),this.editProductForm.patchValue(this.product)}createEditProductForm(){this.editProductForm=new S.e({name:new S.c("",S.r.required),price:new S.c(0,[S.r.required,S.r.min(.01),this.regexValidator(new RegExp("\\$?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(\\.[0-9][0-9])?$"),{noDecimal:!0})]),description:new S.c(null,S.r.required),productBrandId:new S.c(null,S.r.required),productTypeId:new S.c(null,S.r.required)})}onSubmit(){if("edit"===this.route.snapshot.url[0].path){const t=Object.assign(Object.assign(Object.assign({},this.product),this.editProductForm.value),{price:+this.editProductForm.get("price").value});this.adminService.updateProduct(t,+this.route.snapshot.paramMap.get("id")).subscribe(()=>{this.router.navigate(["/admin"])},t=>console.log(t))}else{const t=Object.assign(Object.assign({},this.editProductForm.value),{price:+this.editProductForm.get("price").value});this.adminService.createProduct(t).subscribe(()=>{this.router.navigate(["/admin"])},t=>console.log(t))}}regexValidator(t,e){return o=>o.value?t.test(o.value)?null:e:null}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(i.a),s.Pb(d),s.Pb(i.c))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-edit-product-form"]],inputs:{product:"product",brands:"brands",types:"types"},decls:23,vars:22,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["formControlName","name",3,"label"],["formControlName","price",3,"label","type"],[1,"form-group","col-md-12"],["formControlName","description",3,"label","type"],["formControlName","productTypeId",3,"label","Items","selectedId"],["formControlName","productBrandId",3,"label","Items","selectedId"],["type","submit",1,"btn","btn-primary","my-3","float-right",3,"disabled"]],template:function(t,e){1&t&&(s.Vb(0,"form",0),s.dc("ngSubmit",(function(){return e.onSubmit()})),s.Vb(1,"div",1),s.Vb(2,"div",2),s.Qb(3,"app-text-input",3),s.Ub(),s.Vb(4,"div",2),s.Qb(5,"app-text-input",4),s.Ub(),s.Ub(),s.Vb(6,"div",1),s.Vb(7,"div",5),s.Qb(8,"app-text-input",6),s.Ub(),s.Ub(),s.Vb(9,"div",1),s.Vb(10,"div",2),s.Vb(11,"label"),s.Jc(12),s.hc(13,"translate"),s.Ub(),s.Qb(14,"app-select-dropdown",7),s.Ub(),s.Vb(15,"div",2),s.Vb(16,"label"),s.Jc(17),s.hc(18,"translate"),s.Ub(),s.Qb(19,"app-select-dropdown",8),s.Ub(),s.Ub(),s.Vb(20,"button",9),s.Jc(21),s.hc(22,"translate"),s.Ub(),s.Ub()),2&t&&(s.nc("formGroup",e.editProductForm),s.Bb(3),s.nc("label","Nombre"),s.Bb(2),s.nc("label","Precio")("type","number"),s.Bb(3),s.nc("label","Descripcion")("type","textarea"),s.Bb(4),s.Kc(s.ic(13,16,"edit-product-form.categories")),s.Bb(2),s.nc("label","Categorias")("Items",e.types)("selectedId",e.product.productTypeId),s.Bb(3),s.Kc(s.ic(18,18,"edit-product-form.brands")),s.Bb(2),s.nc("label","Marcas")("Items",e.brands)("selectedId",e.product.productBrandId),s.Bb(1),s.nc("disabled",e.editProductForm.invalid),s.Bb(1),s.Kc(s.ic(22,20,"edit-product-form.send")))},directives:[S.t,S.m,S.f,N.a,S.l,S.d,H],pipes:[u.c],styles:[""]}),t})();var E=o("EApP"),Q=o("YD+O"),$=o("tq8E");function q(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Qb(1,"img",7),s.Vb(2,"button",8),s.dc("click",(function(){return s.Ac(t),s.gc().onUpload()})),s.Jc(3),s.hc(4,"translate"),s.Ub(),s.Sb()}if(2&t){const t=s.gc();s.Bb(1),s.nc("src",t.croppedImage,s.Cc),s.Bb(2),s.Kc(s.ic(4,2,"photo-widget.photo-widget.uploadImage"))}}let R=(()=>{class t{constructor(){this.addFile=new s.n,this.files=[],this.imageChangedEvent="",this.croppedImage=""}ngOnInit(){}onSelect(t){this.files=[],this.files.push(...t.addedFiles),this.fileChangeEvent(this.files[0])}fileChangeEvent(t){this.imageChangedEvent=t}imageCropped(t){this.croppedImage=t.base64}onUpload(){console.log(Object(Q.c)(this.croppedImage)),this.addFile.emit(Object(Q.c)(this.croppedImage))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Jb({type:t,selectors:[["app-photo-widget"]],outputs:{addFile:"addFile"},decls:21,vars:17,consts:[[1,"row"],[1,"col-4"],["ngx-dropzone","",1,"custom-dropzone",3,"change"],[1,"fa","fa-upload","fa-4x"],[1,"col-4","img-preview"],["format","png",1,"img-fluid",3,"imageChangedEvent","imageFile","maintainAspectRatio","aspectRatio","imageCropped"],[4,"ngIf"],[1,"img-fluid",3,"src"],[1,"btn-block","btn-primary",3,"click"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.Vb(2,"h3"),s.Jc(3),s.hc(4,"translate"),s.Ub(),s.Vb(5,"div",2),s.dc("change",(function(t){return e.onSelect(t)})),s.Vb(6,"ngx-dropzone-label"),s.Qb(7,"i",3),s.Vb(8,"h4"),s.Jc(9),s.hc(10,"translate"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(11,"div",4),s.Vb(12,"h3"),s.Jc(13),s.hc(14,"translate"),s.Ub(),s.Vb(15,"image-cropper",5),s.dc("imageCropped",(function(t){return e.imageCropped(t)})),s.Ub(),s.Ub(),s.Vb(16,"div",1),s.Vb(17,"h3"),s.Jc(18),s.hc(19,"translate"),s.Ub(),s.Hc(20,q,5,4,"ng-container",6),s.Ub(),s.Ub()),2&t&&(s.Bb(3),s.Kc(s.ic(4,9,"photo-widget.photo-widget.step1")),s.Bb(6),s.Kc(s.ic(10,11,"photo-widget.photo-widget.dropImage")),s.Bb(4),s.Kc(s.ic(14,13,"photo-widget.photo-widget.step2")),s.Bb(2),s.nc("imageChangedEvent",e.imageChangedEvent)("imageFile",e.files[0])("maintainAspectRatio",!0)("aspectRatio",1),s.Bb(3),s.Kc(s.ic(19,15,"photo-widget.photo-widget.step3")),s.Bb(2),s.nc("ngIf",e.croppedImage))},directives:[$.a,$.c,Q.a,c.m],pipes:[u.c],styles:[".custom-dropzone[_ngcontent-%COMP%]{border:3px dashed #eee;border-radius:5px;padding-top:30px;text-align:center;height:200px}.custom-dropzone.ngx-dz-hovered[_ngcontent-%COMP%]{border:3px solid green}"]}),t})();function W(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div",7),s.Vb(1,"div",8),s.Qb(2,"img",9),s.Vb(3,"div",10),s.Vb(4,"button",11),s.dc("click",(function(){s.Ac(t);const o=e.$implicit;return s.gc(2).setMainPhoto(o.id)})),s.Jc(5," Principal "),s.Ub(),s.Vb(6,"button",12),s.dc("click",(function(){s.Ac(t);const o=e.$implicit;return s.gc(2).deletePhoto(o.id)})),s.Qb(7,"i",13),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=e.$implicit;s.Bb(2),s.oc("src",t.pictureUrl,s.Cc),s.oc("alt",t.fileName),s.Bb(2),s.Db(t.isMain?"btn btn-success":"btn btn-outline-success"),s.nc("disabled",t.isMain),s.Bb(2),s.nc("disabled",t.isMain)}}function Y(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"div",3),s.Vb(2,"h3"),s.Jc(3),s.hc(4,"translate"),s.Ub(),s.Vb(5,"button",4),s.dc("click",(function(){return s.Ac(t),s.gc().addPhotoModeToggle()})),s.Jc(6),s.hc(7,"translate"),s.Ub(),s.Ub(),s.Vb(8,"div",5),s.Hc(9,W,8,7,"div",6),s.Ub(),s.Sb()}if(2&t){const t=s.gc();s.Bb(3),s.Kc(s.ic(4,3,"edit-product-photo.productPhoto")),s.Bb(3),s.Lc(" ",s.ic(7,5,"edit-product-photo.addPhoto")," "),s.Bb(3),s.nc("ngForOf",null==t.product?null:t.product.photos)}}function G(t,e){if(1&t&&(s.Vb(0,"div",17),s.Vb(1,"div",18),s.Jc(2),s.Ub(),s.Ub()),2&t){const t=s.gc(2);s.Bb(1),s.Gc("width",t.progress,"%"),s.Bb(1),s.Lc(" ",t.progress,"% ")}}function Z(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"div",3),s.Vb(2,"h3"),s.Jc(3),s.hc(4,"translate"),s.Ub(),s.Vb(5,"button",14),s.dc("click",(function(){return s.Ac(t),s.gc().addPhotoModeToggle()})),s.Jc(6),s.hc(7,"translate"),s.Ub(),s.Ub(),s.Hc(8,G,3,3,"div",15),s.Vb(9,"app-photo-widget",16),s.dc("addFile",(function(e){return s.Ac(t),s.gc().uploadFile(e)})),s.Ub(),s.Sb()}if(2&t){const t=s.gc();s.Bb(3),s.Kc(s.ic(4,3,"edit-product-photo.addPhoto")),s.Bb(3),s.Lc(" ",s.ic(7,5,"edit-product-photo.cancel")," "),s.Bb(2),s.nc("ngIf",t.progress>0)}}let _=(()=>{class t{constructor(t,e){this.adminService=t,this.toast=e,this.progress=0,this.addPhotoMode=!1}ngOnInit(){}addPhotoModeToggle(){this.addPhotoMode=!this.addPhotoMode}uploadFile(t){this.adminService.uploadImage(t,this.product.id).subscribe(t=>{switch(t.type){case b.d.UploadProgress:this.progress=Math.round(t.loaded/t.total*100);break;case b.d.Response:this.product=t.body,setTimeout(()=>{this.progress=0,this.addPhotoMode=!1},1500)}},t=>{this.toast.error(t.errors?t.errors[0]:"Problema al cargar imagen"),this.progress=0})}deletePhoto(t){this.adminService.deleteProductPhoto(t,this.product.id).subscribe(()=>{const e=this.product.photos.findIndex(e=>e.id===t);this.product.photos.splice(e,1)},t=>{this.toast.error("Problema al borrar imagen"),console.log(t)})}setMainPhoto(t){this.adminService.setMainPhoto(t,this.product.id).subscribe(t=>{this.product=t})}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(d),s.Pb(E.b))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-edit-product-photos"]],inputs:{product:"product"},decls:4,vars:2,consts:[[1,"py-5"],[1,"container"],[4,"ngIf"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"row"],["class","col-3",4,"ngFor","ngForOf"],[1,"col-3"],[1,"card"],["width","100%","height","225",1,"card-img-top",3,"src","alt"],[1,"btn-group",2,"width","100%"],["type","button",2,"width","50%",3,"disabled","click"],["type","button",1,"btn","btn-outline-danger",2,"width","50%",3,"disabled","click"],[1,"fa","fa-trash"],[1,"btn","btn-outline-secondary",3,"click"],["class","progress form-group",4,"ngIf"],[3,"addFile"],[1,"progress","form-group"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.Hc(2,Y,10,7,"ng-container",2),s.Hc(3,Z,10,7,"ng-container",2),s.Ub(),s.Ub()),2&t&&(s.Bb(2),s.nc("ngIf",!e.addPhotoMode),s.Bb(1),s.nc("ngIf",e.addPhotoMode))},directives:[c.m,c.l,R],pipes:[u.c],styles:[""]}),t})(),X=(()=>{class t{constructor(t,e){this.shopService=t,this.route=e,this.productFormValues=new k}ngOnInit(){const t=this.getBrands(),e=this.getTypes();Object(x.a)([e,t]).subscribe(t=>{this.brands=t[0],this.types=t[1]},t=>console.log(t),()=>{"edit"===this.route.snapshot.url[0].path&&this.loadProduct()})}loadProduct(){const t=+this.route.snapshot.paramMap.get("id");this.shopService.getProduct(t).subscribe(t=>{const e=this.brands&&this.brands.find(e=>e.name===t.productBrand).id,o=this.types&&this.types.find(e=>e.name===t.productType).id;this.product=t,this.productFormValues=Object.assign(Object.assign({},t),{productBrandId:e,productTypeId:o})})}getTypes(){return this.shopService.getBrands()}getBrands(){return this.shopService.getTypes()}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.a),s.Pb(i.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-edit-product"]],decls:13,vars:10,consts:[[1,"product-edit","mt-5"],[1,"container"],[1,"row"],[1,"col-12"],[1,"tab-panel"],[1,"product-tabset"],[3,"heading"],[1,"col-lg-8"],[3,"product","brands","types"],[3,"product"]],template:function(t,e){1&t&&(s.Vb(0,"section",0),s.Vb(1,"div",1),s.Vb(2,"div",2),s.Vb(3,"div",3),s.Vb(4,"div",4),s.Vb(5,"tabset",5),s.Vb(6,"tab",6),s.hc(7,"translate"),s.Vb(8,"div",7),s.Qb(9,"app-edit-product-form",8),s.Ub(),s.Ub(),s.Vb(10,"tab",6),s.hc(11,"translate"),s.Qb(12,"app-edit-product-photos",9),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&t&&(s.Bb(6),s.oc("heading",s.ic(7,6,"edit-product.editHeading")),s.Bb(3),s.nc("product",e.productFormValues)("brands",e.brands)("types",e.types),s.Bb(1),s.oc("heading",s.ic(11,8,"edit-product.editPhotoHeading")),s.Bb(2),s.nc("product",e.product))},directives:[M.c,M.a,z,_],pipes:[u.c],styles:[""]}),t})();var tt=o("2rwd");function et(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div"),s.Vb(1,"a",10),s.Vb(2,"i",11),s.dc("click",(function(){s.Ac(t);const e=s.gc().$implicit;return s.gc().disableUser(e)})),s.Ub(),s.Ub(),s.Ub()}}function ot(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div"),s.Vb(1,"a",12),s.Vb(2,"i",11),s.dc("click",(function(){s.Ac(t);const e=s.gc().$implicit;return s.gc().enableUser(e)})),s.Ub(),s.Ub(),s.Ub()}}function ct(t,e){if(1&t&&(s.Vb(0,"tr",7),s.Vb(1,"td",8),s.Vb(2,"strong"),s.Jc(3),s.Ub(),s.Ub(),s.Vb(4,"td",8),s.Vb(5,"strong"),s.Jc(6),s.Ub(),s.Ub(),s.Vb(7,"td",8),s.Vb(8,"strong"),s.Jc(9),s.Ub(),s.Ub(),s.Vb(10,"td",8),s.Hc(11,et,3,0,"div",9),s.Hc(12,ot,3,0,"div",9),s.Ub(),s.Ub()),2&t){const t=e.$implicit,o=e.index;s.Bb(3),s.Kc(o),s.Bb(3),s.Kc(t.displayName),s.Bb(3),s.Kc(t.email),s.Bb(2),s.nc("ngIf",t.active),s.Bb(1),s.nc("ngIf",!t.active)}}const rt=[{path:"",component:U},{path:"create",component:X,data:{breadcrumb:"Crear"}},{path:"edit/:id",component:X,data:{breadcrumb:"Editar"}},{path:"logs",component:O,data:{breadcrumb:"Bitacora"}},{path:"users",component:(()=>{class t{constructor(t,e,o,c){this.fb=t,this.admin=e,this.account=o,this.toast=c}ngOnInit(){this.currentUser=this.account.getCurrentUser(),this.loadUsers()}loadUsers(){this.admin.getAllUsers().subscribe(t=>{this.users=t.filter(t=>t.email!=this.currentUser.email)},t=>{console.log(t)})}disableUser(t){this.account.disableUser({userName:t.email}).subscribe(t=>{t&&(this.toast.success("Usuario deshabilitado"),this.loadUsers(),setTimeout(()=>{},3e3))},t=>{console.log(t)})}enableUser(t){this.account.enableUser({userName:t.email}).subscribe(t=>{t&&(this.toast.success("Usuario habilitado"),this.loadUsers(),setTimeout(()=>{},3e3))},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(S.b),s.Pb(d),s.Pb(tt.a),s.Pb(E.b))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-users"]],decls:19,vars:7,consts:[[1,"table-responsive"],[1,"container","mt-5"],[1,"row"],[1,"col-12"],[1,"table","table-hover",2,"cursor","pointer"],[1,"thead-light"],["class","border-0",4,"ngFor","ngForOf"],[1,"border-0"],[1,"align-middle"],[4,"ngIf"],[1,"text-danger","ml-5"],[1,"fa","fa-user",2,"font-size","2em","cursor","pointer",3,"click"],[1,"text-success","ml-5"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.Vb(2,"div",2),s.Vb(3,"div",3),s.Vb(4,"table",4),s.Vb(5,"thead",5),s.Vb(6,"tr"),s.Vb(7,"th"),s.Jc(8,"#"),s.Ub(),s.Vb(9,"th"),s.Jc(10),s.hc(11,"translate"),s.Ub(),s.Vb(12,"th"),s.Jc(13,"Email"),s.Ub(),s.Vb(14,"th"),s.Jc(15),s.hc(16,"translate"),s.Ub(),s.Ub(),s.Ub(),s.Vb(17,"tbody"),s.Hc(18,ct,13,5,"tr",6),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&t&&(s.Bb(10),s.Kc(s.ic(11,3,"users.name")),s.Bb(5),s.Kc(s.ic(16,5,"users.enableDisable")),s.Bb(3),s.nc("ngForOf",e.users))},directives:[c.l,c.m],pipes:[u.c],styles:[""]}),t})(),data:{breadcrumb:"Usuarios"}},{path:"logs/:id",component:I,data:{breadcrumb:"Detalle"}}];let it=(()=>{class t{}return t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({factory:function(e){return new(e||t)},imports:[[i.g.forChild(rt)],i.g]}),t})(),st=(()=>{class t{}return t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({factory:function(e){return new(e||t)},imports:[[c.c,r.a,it,u.b]]}),t})()}}]);