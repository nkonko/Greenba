function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{jkDv:function(e,t,o){"use strict";o.r(t),o.d(t,"AdminModule",(function(){return ve}));var r,n=o("SVse"),i=o("PCNd"),a=o("iInd"),c=o("8Y7J"),s=o("mwRl"),l=o("AytR"),b=o("IheW"),u=((r=function(){function e(t){_classCallCheck(this,e),this.http=t,this.baseUrl=l.a.apiUrl}return _createClass(e,[{key:"createProduct",value:function(e){return this.http.post(this.baseUrl+"products",e)}},{key:"updateProduct",value:function(e,t){return this.http.put(this.baseUrl+"products/"+t,e)}},{key:"deleteProduct",value:function(e){return this.http.delete(this.baseUrl+"products/"+e)}},{key:"uploadImage",value:function(e,t){var o=new FormData;return o.append("photo",e,"image.png"),this.http.put(this.baseUrl+"products/"+t+"/photo",o,{reportProgress:!0,observe:"events"})}},{key:"deleteProductPhoto",value:function(e,t){return this.http.delete(this.baseUrl+"products/"+t+"/photo"+e)}},{key:"setMainPhoto",value:function(e,t){return this.http.post(this.baseUrl+"products/"+t+"/photo/"+e,{})}},{key:"getAllUsers",value:function(){return this.http.get(this.baseUrl+"account/getallusers")}}]),e}()).\u0275fac=function(e){return new(e||r)(c.Zb(b.b))},r.\u0275prov=c.Lb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),d=o("/gyc"),p=o("a4eG"),g=function(e){return["edit",e]};function h(e,t){if(1&e){var o=c.Wb();c.Vb(0,"tr"),c.Vb(1,"td",18),c.Jc(2),c.Ub(),c.Vb(3,"td"),c.Vb(4,"div",12),c.Qb(5,"img",19),c.Ub(),c.Ub(),c.Vb(6,"th",18),c.Vb(7,"h5"),c.Jc(8),c.Ub(),c.Ub(),c.Vb(9,"td",18),c.Jc(10),c.hc(11,"currency"),c.Ub(),c.Vb(12,"td",18),c.Vb(13,"button",20),c.Jc(14,"Editar"),c.Ub(),c.Ub(),c.Vb(15,"td",18),c.Vb(16,"button",21),c.dc("click",(function(){c.Ac(o);var e=t.$implicit;return c.gc(2).deleteProduct(e.id)})),c.Jc(17,"Borrar"),c.Ub(),c.Ub(),c.Ub()}if(2&e){var r=t.$implicit;c.Bb(2),c.Kc(r.id),c.Bb(3),c.oc("src",r.pictureUrl||"/assets/images/placeholder.png",c.Cc),c.oc("alt",r.name),c.Bb(3),c.Kc(r.name),c.Bb(2),c.Kc(c.ic(11,6,r.price)),c.Bb(3),c.nc("routerLink",c.rc(8,g,r.id))}}function f(e,t){if(1&e){var o=c.Wb();c.Vb(0,"div",22),c.Vb(1,"app-pager",23),c.dc("pageChanged",(function(e){return c.Ac(o),c.gc(2).onPageChanged(e)})),c.Ub(),c.Ub()}if(2&e){var r=c.gc(2);c.Bb(1),c.nc("pageSize",r.shopParams.pageSize)("pageNumber",r.shopParams.pageNumber)("totalCount",r.totalCount)}}var m=function(){return["/admin/create"]};function v(e,t){if(1&e&&(c.Vb(0,"section",1),c.Vb(1,"div",2),c.Vb(2,"div",3),c.Vb(3,"div",4),c.Vb(4,"div",5),c.Vb(5,"header",6),c.Jc(6,"Lista de productos"),c.Ub(),c.Vb(7,"button",7),c.Jc(8,"Crear nuevo producto"),c.Ub(),c.Ub(),c.Qb(9,"app-paging-header",8),c.Vb(10,"div",9),c.Vb(11,"table",10),c.Vb(12,"thead"),c.Vb(13,"tr"),c.Vb(14,"th",11),c.Vb(15,"div",12),c.Jc(16,"#"),c.Ub(),c.Ub(),c.Vb(17,"th",11),c.Vb(18,"div",13),c.Jc(19,"Producto"),c.Ub(),c.Ub(),c.Vb(20,"th",11),c.Vb(21,"div",14),c.Jc(22,"Nombre"),c.Ub(),c.Ub(),c.Vb(23,"th",11),c.Vb(24,"div",15),c.Jc(25,"Precio"),c.Ub(),c.Ub(),c.Vb(26,"th",11),c.Vb(27,"div",15),c.Jc(28,"Editar"),c.Ub(),c.Ub(),c.Vb(29,"th",11),c.Vb(30,"div",15),c.Jc(31,"Borrar"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(32,"tbody"),c.Hc(33,h,18,10,"tr",16),c.Ub(),c.Ub(),c.Ub(),c.Hc(34,f,2,3,"div",17),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&e){var o=c.gc();c.Bb(7),c.nc("routerLink",c.qc(6,m)),c.Bb(2),c.nc("totalCount",o.totalCount)("pageSize",o.shopParams.pageSize)("pageNumber",o.shopParams.pageNumber),c.Bb(24),c.nc("ngForOf",o.products),c.Bb(1),c.nc("ngIf",o.totalCount>0)}}var U,V,y=((U=function(){function e(t,o){_classCallCheck(this,e),this.shopService=t,this.adminservice=o,this.shopParams=this.shopService.getShopParams()}return _createClass(e,[{key:"ngOnInit",value:function(){this.getProducts()}},{key:"getProducts",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.shopService.getProducts(t).subscribe((function(t){e.products=t.data,e.totalCount=t.count}),(function(e){return console.log(e)}))}},{key:"onPageChanged",value:function(e){var t=this.shopService.getShopParams();t.pageNumber!==e&&(t.pageNumber=e,this.shopService.setShopParams(t),this.getProducts(!0))}},{key:"deleteProduct",value:function(e){var t=this;this.adminservice.deleteProduct(e).subscribe((function(){t.products.splice(t.products.findIndex((function(t){return t.id===e})),1),t.totalCount--,t.shopParams.pageSize*(t.shopParams.pageNumber-1)===t.totalCount&&(t.shopParams.pageNumber--,t.shopService.setShopParams(t.shopParams),t.getProducts())}),(function(e){return console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||U)(c.Pb(s.a),c.Pb(u))},U.\u0275cmp=c.Jb({type:U,selectors:[["app-admin"]],decls:1,vars:1,consts:[["class","admin-page",4,"ngIf"],[1,"admin-page"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"d-flex","justify-content-between","my-3"],[1,"h2"],[1,"btn","btn-outline-success",3,"routerLink"],[3,"totalCount","pageSize","pageNumber"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"p-2"],[1,"p-2","text-uppercase"],[1,"py-2","text-uppercase"],[1,"p-2","px-3","text-uppercase"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"align-middle"],[1,"img-fluid",2,"max-height","50px",3,"src","alt"],[1,"btn","btn-warning",3,"routerLink"],[1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-center"],[3,"pageSize","pageNumber","totalCount","pageChanged"]],template:function(e,t){1&e&&c.Hc(0,v,35,7,"section",0),2&e&&c.nc("ngIf",t.products)},directives:[n.m,a.d,d.a,n.l,p.a],pipes:[n.d],styles:[""]}),U),P=function e(){_classCallCheck(this,e),this.sort="Newest",this.pageNumber=1,this.pageSize=6,this.level="Error"},k=function e(){_classCallCheck(this,e),this.data=[]},C=o("lJxs"),S=o("wd/R"),I=((V=function(){function e(t){_classCallCheck(this,e),this.http=t,this.baseUrl=l.a.apiUrl,this.logParams=new P,this.pagination=new k}return _createClass(e,[{key:"getLogsByParams",value:function(){var e=this,t=new b.f;return t=(t=(t=(t=t.append("sort",this.logParams.sort)).append("pageIndex",this.logParams.pageNumber.toString())).append("pageSize",this.logParams.pageSize.toString())).append("level",this.logParams.level),this.logParams&&(this.logParams.dateFrom&&(this.logParams.dateFrom=S(this.logParams.dateFrom).format("YYYY-MM-DD"),t=t.append("dateFrom",this.logParams.dateFrom)),this.logParams.dateTo&&(this.logParams.dateTo=S(this.logParams.dateTo).format("YYYY-MM-DD"),t=t.append("dateTo",this.logParams.dateTo))),this.http.get(this.baseUrl+"logs",{observe:"response",params:t}).pipe(Object(C.a)((function(t){return e.pagination=t.body,e.pagination})))}},{key:"getLogDetailed",value:function(e){return this.http.get(this.baseUrl+"logs/"+e)}},{key:"getLogParams",value:function(){return this.logParams}},{key:"setLogParams",value:function(e){this.logParams=e}}]),e}()).\u0275fac=function(e){return new(e||V)(c.Zb(b.b))},V.\u0275prov=c.Lb({token:V,factory:V.\u0275fac,providedIn:"root"}),V);function B(e,t){if(1&e&&(c.Vb(0,"div",1),c.Vb(1,"div",2),c.Vb(2,"div",3),c.Vb(3,"h3"),c.Jc(4),c.Ub(),c.Ub(),c.Ub(),c.Vb(5,"div",2),c.Vb(6,"div",4),c.Vb(7,"h4"),c.Jc(8,"Mensaje"),c.Ub(),c.Vb(9,"p"),c.Jc(10),c.hc(11,"slice"),c.Ub(),c.Ub(),c.Ub(),c.Vb(12,"div",2),c.Vb(13,"div",5),c.Vb(14,"h4"),c.Jc(15,"Exepcion"),c.Ub(),c.Vb(16,"p"),c.Jc(17),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&e){var o=c.gc();c.Bb(4),c.Lc("Log n\xb0: ",o.log.id,""),c.Bb(6),c.Kc(c.kc(11,3,o.log.message,0,130)),c.Bb(7),c.Kc(o.log.exception)}}var J,w=((J=function(){function e(t,o){_classCallCheck(this,e),this.logService=t,this.activatedRoute=o}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadLog()}},{key:"loadLog",value:function(){var e=this;this.logService.getLogDetailed(+this.activatedRoute.snapshot.paramMap.get("id")).subscribe((function(t){e.log=t}),(function(e){return console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||J)(c.Pb(I),c.Pb(a.a))},J.\u0275cmp=c.Jb({type:J,selectors:[["app-log-detail"]],decls:1,vars:1,consts:[["class","container mt-5",4,"ngIf"],[1,"container","mt-5"],[1,"row"],[1,"col-12"],[1,"col-6"],[1,"col-12","ml-3"]],template:function(e,t){1&e&&c.Hc(0,B,18,7,"div",0),2&e&&c.nc("ngIf",t.log)},directives:[n.m],pipes:[n.t],styles:[""]}),J),F=o("s7LF"),O=o("VfTn");function _(e,t){if(1&e&&(c.Vb(0,"option",17),c.Jc(1),c.Ub()),2&e){var o=t.$implicit,r=c.gc();c.nc("selected",r.logParams.sort===o.value)("value",o.value),c.Bb(1),c.Kc(o.name)}}function L(e,t){if(1&e&&(c.Vb(0,"option",17),c.Jc(1),c.Ub()),2&e){var o=t.$implicit,r=c.gc();c.nc("selected",r.logParams.sort===o.value)("value",o.value),c.Bb(1),c.Kc(o.name)}}function A(e,t){if(1&e&&(c.Vb(0,"tr",18),c.Vb(1,"th"),c.Jc(2),c.Ub(),c.Vb(3,"td"),c.Jc(4),c.hc(5,"slice"),c.Ub(),c.Vb(6,"td"),c.Jc(7),c.hc(8,"slice"),c.Ub(),c.Vb(9,"td"),c.Jc(10),c.hc(11,"slice"),c.Ub(),c.Vb(12,"td"),c.Jc(13),c.Ub(),c.Vb(14,"td"),c.Jc(15),c.Ub(),c.Ub()),2&e){var o=t.$implicit;c.oc("routerLink",o.id),c.Bb(2),c.Kc(o.id),c.Bb(2),c.Kc(c.kc(5,7,o.message,0,30)),c.Bb(3),c.Kc(c.kc(8,11,o.logged,0,10)),c.Bb(3),c.Kc(c.kc(11,15,o.exception,0,65)),c.Bb(3),c.Kc(o.level),c.Bb(2),c.Kc(o.logger)}}var T,M=((T=function(){function e(t,o){_classCallCheck(this,e),this.logService=t,this.fb=o,this.timeOptions=[{name:"Mas nuevos",value:"Newest"},{name:"Mas viejos",value:"Oldest"}],this.levelOptions=[{name:"Alta",value:"Error"},{name:"Media",value:"Warn"},{name:"Baja",value:"Info"}],this.logParams=this.logService.getLogParams()}return _createClass(e,[{key:"ngOnInit",value:function(){this.getLogs(),this.createForm()}},{key:"getLogs",value:function(){var e=this;this.logService.getLogsByParams().subscribe((function(t){e.logs=t.data,e.totalCount=t.count}),(function(e){console.log(e)}))}},{key:"onSortSelected",value:function(e){var t=this.logService.getLogParams();t.sort=e,this.logService.setLogParams(t),this.getLogs()}},{key:"onPageChanged",value:function(e){var t=this.logService.getLogParams();t.pageNumber!==e&&(t.pageNumber=e,this.logService.getLogParams(),this.getLogs())}},{key:"createForm",value:function(){this.logForm=this.fb.group({dateFrom:[null,F.r.required],dateTo:[null,F.r.required]})}},{key:"onLevelSelected",value:function(e){var t=this.logService.getLogParams();t.level=e,this.logService.setLogParams(t),this.getLogs()}},{key:"filter",value:function(){var e=this;if(this.logForm.controls.dateFrom.value||this.logForm.controls.dateTo.value){var t=this.logService.getLogParams();t.dateFrom=this.logForm.controls.dateFrom.value,t.dateTo=this.logForm.controls.dateTo.value,this.logService.setLogParams(t),this.logService.getLogsByParams().subscribe((function(t){e.logs=t.data,e.totalCount=t.count}),(function(e){console.log(e)}))}}}]),e}()).\u0275fac=function(e){return new(e||T)(c.Pb(I),c.Pb(F.b))},T.\u0275cmp=c.Jb({type:T,selectors:[["app-logs"]],decls:44,vars:7,consts:[[1,"container","mt-3"],[1,"row","align-items-start"],[1,"col-3"],[1,"text-warning"],[1,"custom-select","mb-3","mb-4",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"col-3","mb-3"],[3,"formGroup"],["formControlName","dateFrom","placeholder","Desde",3,"ngModelChange"],["formControlName","dateTo","placeholder","Hasta",3,"ngModelChange"],[1,"row"],[1,"col-12"],[1,"table","table-hover",2,"cursor","pointer"],[1,"thead-light"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],[3,"pageSize","totalCount","pageNumber","pageChanged"],[3,"selected","value"],[3,"routerLink"]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"div",2),c.Vb(3,"div"),c.Vb(4,"h4",3),c.Jc(5,"Antig\xfcedad"),c.Ub(),c.Vb(6,"select",4),c.dc("change",(function(e){return t.onSortSelected(e.target.value)})),c.Hc(7,_,2,3,"option",5),c.Ub(),c.Ub(),c.Ub(),c.Vb(8,"div",6),c.Vb(9,"form",7),c.Vb(10,"h4",3),c.Jc(11,"Fecha desde:"),c.Ub(),c.Vb(12,"app-datepicker",8),c.dc("ngModelChange",(function(){return t.filter()})),c.Ub(),c.Qb(13,"br"),c.Vb(14,"h4",3),c.Jc(15,"Fecha hasta:"),c.Ub(),c.Vb(16,"app-datepicker",9),c.dc("ngModelChange",(function(){return t.filter()})),c.Ub(),c.Ub(),c.Ub(),c.Vb(17,"div",6),c.Vb(18,"div"),c.Vb(19,"h4",3),c.Jc(20,"Nivel"),c.Ub(),c.Vb(21,"select",4),c.dc("change",(function(e){return t.onLevelSelected(e.target.value)})),c.Hc(22,L,2,3,"option",5),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(23,"div",10),c.Vb(24,"div",11),c.Vb(25,"table",12),c.Vb(26,"thead",13),c.Vb(27,"tr"),c.Vb(28,"th"),c.Jc(29,"#"),c.Ub(),c.Vb(30,"th"),c.Jc(31,"Mensaje"),c.Ub(),c.Vb(32,"th"),c.Jc(33,"Fecha"),c.Ub(),c.Vb(34,"th"),c.Jc(35,"Excepcion"),c.Ub(),c.Vb(36,"th"),c.Jc(37,"Nivel"),c.Ub(),c.Vb(38,"th"),c.Jc(39,"Componente"),c.Ub(),c.Ub(),c.Ub(),c.Vb(40,"tbody"),c.Hc(41,A,16,19,"tr",14),c.Ub(),c.Ub(),c.Vb(42,"div",15),c.Vb(43,"app-pager",16),c.dc("pageChanged",(function(e){return t.onPageChanged(e)})),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&e&&(c.Bb(7),c.nc("ngForOf",t.timeOptions),c.Bb(2),c.nc("formGroup",t.logForm),c.Bb(13),c.nc("ngForOf",t.levelOptions),c.Bb(19),c.nc("ngForOf",t.logs),c.Bb(2),c.nc("pageSize",t.logParams.pageSize)("totalCount",t.totalCount)("pageNumber",t.logParams.pageNumber))},directives:[n.l,F.t,F.m,F.f,O.a,F.l,F.d,p.a,F.o,F.s,a.d],pipes:[n.t],styles:[""]}),T),x=function e(t){_classCallCheck(this,e),this.name="",this.description="",this.price=0,this.pictureUrl="",Object.assign(this,t)},N=o("cp0P"),j=o("2ZVE"),E=o("gA0Q"),D=["input"];function H(e,t){if(1&e&&(c.Vb(0,"option",6),c.Jc(1),c.Ub()),2&e){var o=t.$implicit,r=c.gc();c.nc("value",o.id)("selected",o.id===r.selectedId),c.Bb(1),c.Lc(" ",o.name," ")}}function z(e,t){if(1&e&&(c.Vb(0,"span"),c.Jc(1),c.Ub()),2&e){var o=c.gc(2);c.Bb(1),c.Lc("",o.label," Es necesario")}}function Q(e,t){if(1&e&&(c.Vb(0,"div",7),c.Hc(1,z,2,1,"span",8),c.Ub()),2&e){var o=c.gc();c.oc("id",o.label),c.Bb(1),c.nc("ngIf",null==o.controlDir.control.errors?null:o.controlDir.control.errors.required)}}var K,$,R=(($=function(){function e(t){_classCallCheck(this,e),this.controlDir=t,this.controlDir.valueAccessor=this}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this.controlDir.control,t=e.asyncValidator?[e.asyncValidator]:[];e.setValidators(e.validator?[e.validator]:[]),e.setAsyncValidators(t),e.updateValueAndValidity()}},{key:"onChange",value:function(e){}},{key:"onTouched",value:function(){}},{key:"writeValue",value:function(e){this.input.nativeElement.value=e}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}}]),e}()).\u0275fac=function(e){return new(e||$)(c.Pb(F.k,2))},$.\u0275cmp=c.Jb({type:$,selectors:[["app-select-dropdown"]],viewQuery:function(e,t){var o;1&e&&c.Ec(D,!0),2&e&&c.wc(o=c.ec())&&(t.input=o.first)},inputs:{label:"label",Items:"Items",selectedId:"selectedId"},decls:6,vars:4,consts:[[1,"form-label-group"],[1,"form-control",3,"id","ngClass","change","blur"],["input",""],["value","null","label","-- Seleccionar --","disabled","","selected","selected"],[3,"value","selected",4,"ngFor","ngForOf"],["class","invalid-feedback d-block",3,"id",4,"ngIf"],[3,"value","selected"],[1,"invalid-feedback","d-block",3,"id"],[4,"ngIf"]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.Vb(1,"select",1,2),c.dc("change",(function(e){return t.onChange(e.target.value-0)}))("blur",(function(){return t.onTouched()})),c.Qb(3,"option",3),c.Hc(4,H,2,3,"option",4),c.Ub(),c.Hc(5,Q,2,2,"div",5),c.Ub()),2&e&&(c.Bb(1),c.oc("id",t.label),c.nc("ngClass",t.controlDir&&t.controlDir.control&&t.controlDir.control.touched?t.controlDir.control.valid?"is-valid":"is-invalid":null),c.Bb(3),c.nc("ngForOf",t.Items),c.Bb(1),c.nc("ngIf",t.controlDir&&t.controlDir.control&&!t.controlDir.control.valid&&t.controlDir.control.touched))},directives:[n.k,F.o,F.s,n.l,n.m],styles:[""]}),$),W=((K=function(){function e(t,o,r){_classCallCheck(this,e),this.route=t,this.adminService=o,this.router=r}return _createClass(e,[{key:"ngOnInit",value:function(){this.createEditProductForm(),this.editProductForm.patchValue(this.product)}},{key:"createEditProductForm",value:function(){this.editProductForm=new F.e({name:new F.c("",F.r.required),price:new F.c(0,[F.r.required,F.r.min(.01),this.regexValidator(new RegExp("\\$?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(\\.[0-9][0-9])?$"),{noDecimal:!0})]),description:new F.c(null,F.r.required),productBrandId:new F.c(null,F.r.required),productTypeId:new F.c(null,F.r.required)})}},{key:"onSubmit",value:function(){var e=this;if("edit"===this.route.snapshot.url[0].path){var t=Object.assign(Object.assign(Object.assign({},this.product),this.editProductForm.value),{price:+this.editProductForm.get("price").value});this.adminService.updateProduct(t,+this.route.snapshot.paramMap.get("id")).subscribe((function(){e.router.navigate(["/admin"])}),(function(e){return console.log(e)}))}else{var o=Object.assign(Object.assign({},this.editProductForm.value),{price:+this.editProductForm.get("price").value});this.adminService.createProduct(o).subscribe((function(){e.router.navigate(["/admin"])}),(function(e){return console.log(e)}))}}},{key:"regexValidator",value:function(e,t){return function(o){return o.value?e.test(o.value)?null:t:null}}}]),e}()).\u0275fac=function(e){return new(e||K)(c.Pb(a.a),c.Pb(u),c.Pb(a.c))},K.\u0275cmp=c.Jb({type:K,selectors:[["app-edit-product-form"]],inputs:{product:"product",brands:"brands",types:"types"},decls:20,vars:13,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["formControlName","name",3,"label"],["formControlName","price",3,"label","type"],[1,"form-group","col-md-12"],["formControlName","description",3,"label","type"],["formControlName","productTypeId",3,"label","Items","selectedId"],["formControlName","productBrandId",3,"label","Items","selectedId"],["type","submit",1,"btn","btn-primary","my-3","float-right",3,"disabled"]],template:function(e,t){1&e&&(c.Vb(0,"form",0),c.dc("ngSubmit",(function(){return t.onSubmit()})),c.Vb(1,"div",1),c.Vb(2,"div",2),c.Qb(3,"app-text-input",3),c.Ub(),c.Vb(4,"div",2),c.Qb(5,"app-text-input",4),c.Ub(),c.Ub(),c.Vb(6,"div",1),c.Vb(7,"div",5),c.Qb(8,"app-text-input",6),c.Ub(),c.Ub(),c.Vb(9,"div",1),c.Vb(10,"div",2),c.Vb(11,"label"),c.Jc(12,"Categorias"),c.Ub(),c.Qb(13,"app-select-dropdown",7),c.Ub(),c.Vb(14,"div",2),c.Vb(15,"label"),c.Jc(16,"Marcas"),c.Ub(),c.Qb(17,"app-select-dropdown",8),c.Ub(),c.Ub(),c.Vb(18,"button",9),c.Jc(19,"Enviar"),c.Ub(),c.Ub()),2&e&&(c.nc("formGroup",t.editProductForm),c.Bb(3),c.nc("label","Nombre"),c.Bb(2),c.nc("label","Precio")("type","number"),c.Bb(3),c.nc("label","Descripcion")("type","textarea"),c.Bb(5),c.nc("label","Categorias")("Items",t.types)("selectedId",t.product.productTypeId),c.Bb(4),c.nc("label","Marcas")("Items",t.brands)("selectedId",t.product.productBrandId),c.Bb(1),c.nc("disabled",t.editProductForm.invalid))},directives:[F.t,F.m,F.f,E.a,F.l,F.d,R],styles:[""]}),K),q=o("EApP"),Y=o("YD+O"),G=o("tq8E");function Z(e,t){if(1&e){var o=c.Wb();c.Tb(0),c.Qb(1,"img",7),c.Vb(2,"button",8),c.dc("click",(function(){return c.Ac(o),c.gc().onUpload()})),c.Jc(3,"Subir imagen"),c.Ub(),c.Sb()}if(2&e){var r=c.gc();c.Bb(1),c.nc("src",r.croppedImage,c.Cc)}}var X,ee=((X=function(){function e(){_classCallCheck(this,e),this.addFile=new c.n,this.files=[],this.imageChangedEvent="",this.croppedImage=""}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onSelect",value:function(e){var t;this.files=[],(t=this.files).push.apply(t,_toConsumableArray(e.addedFiles)),this.fileChangeEvent(this.files[0])}},{key:"fileChangeEvent",value:function(e){this.imageChangedEvent=e}},{key:"imageCropped",value:function(e){this.croppedImage=e.base64}},{key:"onUpload",value:function(){console.log(Object(Y.c)(this.croppedImage)),this.addFile.emit(Object(Y.c)(this.croppedImage))}}]),e}()).\u0275fac=function(e){return new(e||X)},X.\u0275cmp=c.Jb({type:X,selectors:[["app-photo-widget"]],outputs:{addFile:"addFile"},decls:17,vars:5,consts:[[1,"row"],[1,"col-4"],["ngx-dropzone","",1,"custom-dropzone",3,"change"],[1,"fa","fa-upload","fa-4x"],[1,"col-4","img-preview"],["format","png",1,"img-fluid",3,"imageChangedEvent","imageFile","maintainAspectRatio","aspectRatio","imageCropped"],[4,"ngIf"],[1,"img-fluid",3,"src"],[1,"btn-block","btn-primary",3,"click"]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"h3"),c.Jc(3,"Paso 1 - Agregar foto"),c.Ub(),c.Vb(4,"div",2),c.dc("change",(function(e){return t.onSelect(e)})),c.Vb(5,"ngx-dropzone-label"),c.Qb(6,"i",3),c.Vb(7,"h4"),c.Jc(8,"Soltar la imagen aqui"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(9,"div",4),c.Vb(10,"h3"),c.Jc(11,"Paso 2 - Redimension"),c.Ub(),c.Vb(12,"image-cropper",5),c.dc("imageCropped",(function(e){return t.imageCropped(e)})),c.Ub(),c.Ub(),c.Vb(13,"div",1),c.Vb(14,"h3"),c.Jc(15,"Paso 3 - Revision"),c.Ub(),c.Hc(16,Z,4,1,"ng-container",6),c.Ub(),c.Ub()),2&e&&(c.Bb(12),c.nc("imageChangedEvent",t.imageChangedEvent)("imageFile",t.files[0])("maintainAspectRatio",!0)("aspectRatio",1),c.Bb(4),c.nc("ngIf",t.croppedImage))},directives:[G.a,G.c,Y.a,n.m],styles:[".custom-dropzone[_ngcontent-%COMP%]{border:3px dashed #eee;border-radius:5px;padding-top:30px;text-align:center;height:200px}.custom-dropzone.ngx-dz-hovered[_ngcontent-%COMP%]{border:3px solid green}"]}),X);function te(e,t){if(1&e){var o=c.Wb();c.Vb(0,"div",7),c.Vb(1,"div",8),c.Qb(2,"img",9),c.Vb(3,"div",10),c.Vb(4,"button",11),c.dc("click",(function(){c.Ac(o);var e=t.$implicit;return c.gc(2).setMainPhoto(e.id)})),c.Jc(5," Principal "),c.Ub(),c.Vb(6,"button",12),c.dc("click",(function(){c.Ac(o);var e=t.$implicit;return c.gc(2).deletePhoto(e.id)})),c.Qb(7,"i",13),c.Ub(),c.Ub(),c.Ub(),c.Ub()}if(2&e){var r=t.$implicit;c.Bb(2),c.oc("src",r.pictureUrl,c.Cc),c.oc("alt",r.fileName),c.Bb(2),c.Db(r.isMain?"btn btn-success":"btn btn-outline-success"),c.nc("disabled",r.isMain),c.Bb(2),c.nc("disabled",r.isMain)}}function oe(e,t){if(1&e){var o=c.Wb();c.Tb(0),c.Vb(1,"div",3),c.Vb(2,"h3"),c.Jc(3,"Fotos de producto"),c.Ub(),c.Vb(4,"button",4),c.dc("click",(function(){return c.Ac(o),c.gc().addPhotoModeToggle()})),c.Jc(5," Agregar nueva foto "),c.Ub(),c.Ub(),c.Vb(6,"div",5),c.Hc(7,te,8,7,"div",6),c.Ub(),c.Sb()}if(2&e){var r=c.gc();c.Bb(7),c.nc("ngForOf",null==r.product?null:r.product.photos)}}function re(e,t){if(1&e&&(c.Vb(0,"div",17),c.Vb(1,"div",18),c.Jc(2),c.Ub(),c.Ub()),2&e){var o=c.gc(2);c.Bb(1),c.Gc("width",o.progress,"%"),c.Bb(1),c.Lc(" ",o.progress,"% ")}}function ne(e,t){if(1&e){var o=c.Wb();c.Tb(0),c.Vb(1,"div",3),c.Vb(2,"h3"),c.Jc(3,"Agregar nueva imagen"),c.Ub(),c.Vb(4,"button",14),c.dc("click",(function(){return c.Ac(o),c.gc().addPhotoModeToggle()})),c.Jc(5," Cancelar "),c.Ub(),c.Ub(),c.Hc(6,re,3,3,"div",15),c.Vb(7,"app-photo-widget",16),c.dc("addFile",(function(e){return c.Ac(o),c.gc().uploadFile(e)})),c.Ub(),c.Sb()}if(2&e){var r=c.gc();c.Bb(6),c.nc("ngIf",r.progress>0)}}var ie,ae,ce=((ae=function(){function e(t,o){_classCallCheck(this,e),this.adminService=t,this.toast=o,this.progress=0,this.addPhotoMode=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"addPhotoModeToggle",value:function(){this.addPhotoMode=!this.addPhotoMode}},{key:"uploadFile",value:function(e){var t=this;this.adminService.uploadImage(e,this.product.id).subscribe((function(e){switch(e.type){case b.d.UploadProgress:t.progress=Math.round(e.loaded/e.total*100);break;case b.d.Response:t.product=e.body,setTimeout((function(){t.progress=0,t.addPhotoMode=!1}),1500)}}),(function(e){t.toast.error(e.errors?e.errors[0]:"Problema al cargar imagen"),t.progress=0}))}},{key:"deletePhoto",value:function(e){var t=this;this.adminService.deleteProductPhoto(e,this.product.id).subscribe((function(){var o=t.product.photos.findIndex((function(t){return t.id===e}));t.product.photos.splice(o,1)}),(function(e){t.toast.error("Problema al borrar imagen"),console.log(e)}))}},{key:"setMainPhoto",value:function(e){var t=this;this.adminService.setMainPhoto(e,this.product.id).subscribe((function(e){t.product=e}))}}]),e}()).\u0275fac=function(e){return new(e||ae)(c.Pb(u),c.Pb(q.b))},ae.\u0275cmp=c.Jb({type:ae,selectors:[["app-edit-product-photos"]],inputs:{product:"product"},decls:4,vars:2,consts:[[1,"py-5"],[1,"container"],[4,"ngIf"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"row"],["class","col-3",4,"ngFor","ngForOf"],[1,"col-3"],[1,"card"],["width","100%","height","225",1,"card-img-top",3,"src","alt"],[1,"btn-group",2,"width","100%"],["type","button",2,"width","50%",3,"disabled","click"],["type","button",1,"btn","btn-outline-danger",2,"width","50%",3,"disabled","click"],[1,"fa","fa-trash"],[1,"btn","btn-outline-secondary",3,"click"],["class","progress form-group",4,"ngIf"],[3,"addFile"],[1,"progress","form-group"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success"]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Hc(2,oe,8,1,"ng-container",2),c.Hc(3,ne,8,1,"ng-container",2),c.Ub(),c.Ub()),2&e&&(c.Bb(2),c.nc("ngIf",!t.addPhotoMode),c.Bb(1),c.nc("ngIf",t.addPhotoMode))},directives:[n.m,n.l,ee],styles:[""]}),ae),se=((ie=function(){function e(t,o){_classCallCheck(this,e),this.shopService=t,this.route=o,this.productFormValues=new x}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=this.getBrands(),o=this.getTypes();Object(N.a)([o,t]).subscribe((function(t){e.brands=t[0],e.types=t[1]}),(function(e){return console.log(e)}),(function(){"edit"===e.route.snapshot.url[0].path&&e.loadProduct()}))}},{key:"loadProduct",value:function(){var e=this,t=+this.route.snapshot.paramMap.get("id");this.shopService.getProduct(t).subscribe((function(t){var o=e.brands&&e.brands.find((function(e){return e.name===t.productBrand})).id,r=e.types&&e.types.find((function(e){return e.name===t.productType})).id;e.product=t,e.productFormValues=Object.assign(Object.assign({},t),{productBrandId:o,productTypeId:r})}))}},{key:"getTypes",value:function(){return this.shopService.getBrands()}},{key:"getBrands",value:function(){return this.shopService.getTypes()}}]),e}()).\u0275fac=function(e){return new(e||ie)(c.Pb(s.a),c.Pb(a.a))},ie.\u0275cmp=c.Jb({type:ie,selectors:[["app-edit-product"]],decls:11,vars:4,consts:[[1,"product-edit","mt-5"],[1,"container"],[1,"row"],[1,"col-12"],[1,"tab-panel"],[1,"product-tabset"],["heading","Editar Producto"],[1,"col-lg-8"],[3,"product","brands","types"],["heading","Editar Fotos"],[3,"product"]],template:function(e,t){1&e&&(c.Vb(0,"section",0),c.Vb(1,"div",1),c.Vb(2,"div",2),c.Vb(3,"div",3),c.Vb(4,"div",4),c.Vb(5,"tabset",5),c.Vb(6,"tab",6),c.Vb(7,"div",7),c.Qb(8,"app-edit-product-form",8),c.Ub(),c.Ub(),c.Vb(9,"tab",9),c.Qb(10,"app-edit-product-photos",10),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&e&&(c.Bb(8),c.nc("product",t.productFormValues)("brands",t.brands)("types",t.types),c.Bb(2),c.nc("product",t.product))},directives:[j.c,j.a,W,ce],styles:[""]}),ie),le=o("2rwd");function be(e,t){if(1&e){var o=c.Wb();c.Vb(0,"div"),c.Vb(1,"a",10),c.Vb(2,"i",11),c.dc("click",(function(){c.Ac(o);var e=c.gc().$implicit;return c.gc().disableUser(e)})),c.Ub(),c.Ub(),c.Ub()}}function ue(e,t){if(1&e){var o=c.Wb();c.Vb(0,"div"),c.Vb(1,"a",12),c.Vb(2,"i",11),c.dc("click",(function(){c.Ac(o);var e=c.gc().$implicit;return c.gc().enableUser(e)})),c.Ub(),c.Ub(),c.Ub()}}function de(e,t){if(1&e&&(c.Vb(0,"tr",7),c.Vb(1,"td",8),c.Vb(2,"strong"),c.Jc(3),c.Ub(),c.Ub(),c.Vb(4,"td",8),c.Vb(5,"strong"),c.Jc(6),c.Ub(),c.Ub(),c.Vb(7,"td",8),c.Vb(8,"strong"),c.Jc(9),c.Ub(),c.Ub(),c.Vb(10,"td",8),c.Hc(11,be,3,0,"div",9),c.Hc(12,ue,3,0,"div",9),c.Ub(),c.Ub()),2&e){var o=t.$implicit,r=t.index;c.Bb(3),c.Kc(r),c.Bb(3),c.Kc(o.displayName),c.Bb(3),c.Kc(o.email),c.Bb(2),c.nc("ngIf",o.active),c.Bb(1),c.nc("ngIf",!o.active)}}var pe,ge,he,fe=[{path:"",component:y},{path:"create",component:se,data:{breadcrumb:"Crear"}},{path:"edit/:id",component:se,data:{breadcrumb:"Editar"}},{path:"logs",component:M,data:{breadcrumb:"Bitacora"}},{path:"users",component:(pe=function(){function e(t,o,r,n){_classCallCheck(this,e),this.fb=t,this.admin=o,this.account=r,this.toast=n}return _createClass(e,[{key:"ngOnInit",value:function(){this.currentUser=this.account.getCurrentUser(),this.loadUsers()}},{key:"loadUsers",value:function(){var e=this;this.admin.getAllUsers().subscribe((function(t){e.users=t.filter((function(t){return t.email!=e.currentUser.email}))}),(function(e){console.log(e)}))}},{key:"disableUser",value:function(e){var t=this;this.account.disableUser({userName:e.email}).subscribe((function(e){e&&(t.toast.success("Usuario deshabilitado"),t.loadUsers(),setTimeout((function(){}),3e3))}),(function(e){console.log(e)}))}},{key:"enableUser",value:function(e){var t=this;this.account.enableUser({userName:e.email}).subscribe((function(e){e&&(t.toast.success("Usuario habilitado"),t.loadUsers(),setTimeout((function(){}),3e3))}),(function(e){console.log(e)}))}}]),e}(),pe.\u0275fac=function(e){return new(e||pe)(c.Pb(F.b),c.Pb(u),c.Pb(le.a),c.Pb(q.b))},pe.\u0275cmp=c.Jb({type:pe,selectors:[["app-users"]],decls:17,vars:1,consts:[[1,"table-responsive"],[1,"container","mt-5"],[1,"row"],[1,"col-12"],[1,"table","table-hover",2,"cursor","pointer"],[1,"thead-light"],["class","border-0",4,"ngFor","ngForOf"],[1,"border-0"],[1,"align-middle"],[4,"ngIf"],[1,"text-danger","ml-5"],[1,"fa","fa-user",2,"font-size","2em","cursor","pointer",3,"click"],[1,"text-success","ml-5"]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"div",2),c.Vb(3,"div",3),c.Vb(4,"table",4),c.Vb(5,"thead",5),c.Vb(6,"tr"),c.Vb(7,"th"),c.Jc(8,"#"),c.Ub(),c.Vb(9,"th"),c.Jc(10,"Nombre"),c.Ub(),c.Vb(11,"th"),c.Jc(12,"Email"),c.Ub(),c.Vb(13,"th"),c.Jc(14,"Habilitar/Deshabilitar"),c.Ub(),c.Ub(),c.Ub(),c.Vb(15,"tbody"),c.Hc(16,de,13,5,"tr",6),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&e&&(c.Bb(16),c.nc("ngForOf",t.users))},directives:[n.l,n.m],styles:[""]}),pe),data:{breadcrumb:"Usuarios"}},{path:"logs/:id",component:w,data:{breadcrumb:"Detalle"}}],me=((he=function e(){_classCallCheck(this,e)}).\u0275mod=c.Nb({type:he}),he.\u0275inj=c.Mb({factory:function(e){return new(e||he)},imports:[[a.g.forChild(fe)],a.g]}),he),ve=((ge=function e(){_classCallCheck(this,e)}).\u0275mod=c.Nb({type:ge}),ge.\u0275inj=c.Mb({factory:function(e){return new(e||ge)},imports:[[n.c,i.a,me]]}),ge)}}]);