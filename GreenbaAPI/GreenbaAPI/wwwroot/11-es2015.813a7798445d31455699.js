(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{h9W5:function(e,r,t){"use strict";t.r(r),t.d(r,"OrdersModule",(function(){return O}));var o=t("SVse"),a=t("iInd"),s=t("s7LF"),n=t("8Y7J"),i=t("giQ8"),c=t("VfTn"),d=t("a4eG");function b(e,r){if(1&e&&(n.Vb(0,"option",17),n.Jc(1),n.Ub()),2&e){const e=r.$implicit,t=n.gc();n.nc("selected",t.orderParams.sort===e.value)("value",e.value),n.Bb(1),n.Kc(e.name)}}function l(e,r){if(1&e&&(n.Vb(0,"option",17),n.Jc(1),n.Ub()),2&e){const e=r.$implicit,t=n.gc();n.nc("selected",t.orderParams.sort===e.value)("value",e.value),n.Bb(1),n.Kc(e.name)}}function u(e,r){if(1&e&&(n.Vb(0,"tr",18),n.Vb(1,"th"),n.Jc(2),n.Ub(),n.Vb(3,"td"),n.Jc(4),n.hc(5,"date"),n.Ub(),n.Vb(6,"td"),n.Jc(7),n.hc(8,"currency"),n.Ub(),n.Vb(9,"td"),n.Jc(10),n.Ub(),n.Ub()),2&e){const e=r.$implicit;n.pc("routerLink","/orders/",e.id,""),n.Bb(2),n.Lc("# ",e.id,""),n.Bb(2),n.Kc(n.jc(5,5,e.orderDate,"medium")),n.Bb(3),n.Kc(n.ic(8,8,e.total)),n.Bb(3),n.Kc(e.status)}}let m=(()=>{class e{constructor(e,r){this.ordersService=e,this.fb=r,this.timeOptions=[{name:"Mas nuevas",value:"Newest"},{name:"Mas viejas",value:"Oldest"}],this.statusOptions=[{name:"Pendiente",value:"pending"},{name:"Entregado",value:"delivered"},{name:"Cancelado",value:"canceled"}],this.orderParams=this.ordersService.getOrderParams()}ngOnInit(){this.getOrders(),this.createForm()}getOrders(){this.ordersService.getOrdersByParams().subscribe(e=>{this.orders=e.data,this.totalCount=e.count},e=>{console.log(e)})}onSortSelected(e){const r=this.ordersService.getOrderParams();r.sort=e,this.ordersService.setOrderParams(r),this.getOrders()}onPageChanged(e){const r=this.ordersService.getOrderParams();r.pageNumber!==e&&(r.pageNumber=e,this.ordersService.getOrderParams(),this.getOrders())}createForm(){this.orderForm=this.fb.group({dateFrom:[null,s.r.required],dateTo:[null,s.r.required]})}onStatusSelected(e){const r=this.ordersService.getOrderParams();r.state=e,this.ordersService.setOrderParams(r),this.getOrders()}filter(){if(this.orderForm.controls.dateFrom.value||this.orderForm.controls.dateTo.value){const e=this.ordersService.getOrderParams();e.dateFrom=this.orderForm.controls.dateFrom.value,e.dateTo=this.orderForm.controls.dateTo.value,this.ordersService.setOrderParams(e),this.ordersService.getOrdersByParams().subscribe(e=>{this.orders=e.data,this.totalCount=e.count},e=>{console.log(e)})}}}return e.\u0275fac=function(r){return new(r||e)(n.Pb(i.a),n.Pb(s.b))},e.\u0275cmp=n.Jb({type:e,selectors:[["app-orders"]],decls:40,vars:7,consts:[[1,"container","mt-5"],[1,"row","align-items-start"],[1,"col-3"],[1,"text-warning"],[1,"custom-select","mb-3","mb-4",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"col-3","mb-3"],[3,"formGroup"],["formControlName","dateFrom","placeholder","Desde",3,"ngModelChange"],["formControlName","dateTo","placeholder","Hasta",3,"ngModelChange"],[1,"row"],[1,"col-12"],[1,"table","table-hover",2,"cursor","pointer"],[1,"thead-light"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],[3,"pageSize","totalCount","pageNumber","pageChanged"],[3,"selected","value"],[3,"routerLink"]],template:function(e,r){1&e&&(n.Vb(0,"div",0),n.Vb(1,"div",1),n.Vb(2,"div",2),n.Vb(3,"div"),n.Vb(4,"h4",3),n.Jc(5,"Antig\xfcedad"),n.Ub(),n.Vb(6,"select",4),n.dc("change",(function(e){return r.onSortSelected(e.target.value)})),n.Hc(7,b,2,3,"option",5),n.Ub(),n.Ub(),n.Ub(),n.Vb(8,"div",6),n.Vb(9,"form",7),n.Vb(10,"h4",3),n.Jc(11,"Fecha desde:"),n.Ub(),n.Vb(12,"app-datepicker",8),n.dc("ngModelChange",(function(){return r.filter()})),n.Ub(),n.Qb(13,"br"),n.Vb(14,"h4",3),n.Jc(15,"Fecha hasta:"),n.Ub(),n.Vb(16,"app-datepicker",9),n.dc("ngModelChange",(function(){return r.filter()})),n.Ub(),n.Ub(),n.Ub(),n.Vb(17,"div",6),n.Vb(18,"div"),n.Vb(19,"h4",3),n.Jc(20,"Estado"),n.Ub(),n.Vb(21,"select",4),n.dc("change",(function(e){return r.onStatusSelected(e.target.value)})),n.Hc(22,l,2,3,"option",5),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Vb(23,"div",10),n.Vb(24,"div",11),n.Vb(25,"table",12),n.Vb(26,"thead",13),n.Vb(27,"tr"),n.Vb(28,"th"),n.Jc(29,"Orden"),n.Ub(),n.Vb(30,"th"),n.Jc(31,"Fecha"),n.Ub(),n.Vb(32,"th"),n.Jc(33,"Total"),n.Ub(),n.Vb(34,"th"),n.Jc(35,"Estado"),n.Ub(),n.Ub(),n.Ub(),n.Vb(36,"tbody"),n.Hc(37,u,11,10,"tr",14),n.Ub(),n.Ub(),n.Vb(38,"div",15),n.Vb(39,"app-pager",16),n.dc("pageChanged",(function(e){return r.onPageChanged(e)})),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub()),2&e&&(n.Bb(7),n.nc("ngForOf",r.timeOptions),n.Bb(2),n.nc("formGroup",r.orderForm),n.Bb(13),n.nc("ngForOf",r.statusOptions),n.Bb(15),n.nc("ngForOf",r.orders),n.Bb(2),n.nc("pageSize",r.orderParams.pageSize)("totalCount",r.totalCount)("pageNumber",r.orderParams.pageNumber))},directives:[o.l,s.t,s.m,s.f,c.a,s.l,s.d,d.a,s.o,s.s,a.d],pipes:[o.f,o.d],styles:[""]}),e})();var h=t("GlbF"),p=t("GJcC"),g=t("PoZw");function v(e,r){if(1&e&&(n.Vb(0,"div",2),n.Vb(1,"div",3),n.Qb(2,"app-basket-summary",4),n.Ub(),n.Vb(3,"div",5),n.Qb(4,"app-order-totals",6),n.Ub(),n.Ub()),2&e){const e=n.gc();n.Bb(2),n.nc("items",e.order.orderItems)("isBasket",!1)("isOrder",!0),n.Bb(2),n.nc("shippingPrice",e.order.shippingPrice)("subtotal",e.order.subTotal)("total",e.order.total)}}const f=[{path:"",component:m},{path:":id",component:(()=>{class e{constructor(e,r,t){this.route=e,this.breadcrumbService=r,this.ordersService=t,this.breadcrumbService.set("@OrderDetailed","")}ngOnInit(){this.ordersService.getOrderDetailed(+this.route.snapshot.paramMap.get("id")).subscribe(e=>{this.order=e,this.breadcrumbService.set("@OrderDetailed",`Order# ${e.id} - ${e.status}`)},e=>{console.log(e)})}}return e.\u0275fac=function(r){return new(r||e)(n.Pb(a.a),n.Pb(h.c),n.Pb(i.a))},e.\u0275cmp=n.Jb({type:e,selectors:[["app-order-detailed"]],decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row"],[1,"col-8"],[3,"items","isBasket","isOrder"],[1,"col-4"],[3,"shippingPrice","subtotal","total"]],template:function(e,r){1&e&&(n.Vb(0,"div",0),n.Hc(1,v,5,6,"div",1),n.Ub()),2&e&&(n.Bb(1),n.nc("ngIf",r.order))},directives:[o.m,p.a,g.a],styles:[""]}),e})(),data:{breadcrumb:{alias:"Detalle de orden"}}}];let V=(()=>{class e{}return e.\u0275mod=n.Nb({type:e}),e.\u0275inj=n.Mb({factory:function(r){return new(r||e)},imports:[[a.g.forChild(f)],a.g]}),e})();var U=t("PCNd");let O=(()=>{class e{}return e.\u0275mod=n.Nb({type:e}),e.\u0275inj=n.Mb({factory:function(r){return new(r||e)},imports:[[o.c,V,U.a]]}),e})()}}]);